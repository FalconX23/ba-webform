
String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1);};String.prototype.titleize=function(){var string_array=this.split(' ');string_array=string_array.map(function(str){return str.capitalize();});return string_array.join(' ');};Array.prototype.moveInArray=function(from,to){this.splice(to,0,this.splice(from,1)[0]);};$.urlParam=function(name){var results=new RegExp('[\?&]'+name+'=([^&#]*)').exec(window.location.href);if(results==null){return null;}
else{return results[1]||0;}};var isJson={init:function(str){if(typeof(str)==="object"){return str;}
try{var data=JSON.parse(str);}
catch(e){return false;}
return data;}};jQuery.validator.addMethod("preventXss",function(value,element){var regex=/[^\' a-zA-Z0-9&!#$%()"+:?/@,_\.\-]/g;if(regex.test(value)===true){return false;}
return true;},"Incorrect input value. Please use only valid characters.");
var options={"key":"9319099168"};var js_api={};if(typeof(Squiz_Matrix_API)==="function"){js_api=new Squiz_Matrix_API(options);}
var metadataFieldIDs={"userJSON":183};var fixLinks={defaults:{contentContaier:".asset-contents",iframeUrl:"SQ_DESIGN_NAME=iframe"},init:function(contContainer){if($.urlParam("SQ_DESIGN_NAME")=="iframe"){if(contContainer===undefined){contContainer=fixLinks.defaults.contentContaier;}
fixLinks.fix(contContainer);}},fix:function(contContainer){var thisHref="";var h=false;jQuery(contContainer).find("a").each(function(){thisHref=jQuery(this).attr("href");if((thisHref!==undefined)&&(thisHref!=="")){thisHref=thisHref.split("#");if(thisHref[0]!==""){h=fixLinks.generateUrl(thisHref,jQuery(this));if(h!==false){jQuery(this).attr("href",h);}
h=fixLinks.generateTarget(thisHref,jQuery(this));if(h!==false){jQuery(this).attr("target",h);}}}});},generateUrl:function(thisHref,thisLinkObj){var newHref="";if((thisHref[0].indexOf(location.host)!==-1)&&(thisLinkObj.hasClass("js-never-frame")===false)){newHref=thisHref[0]+"?"+fixLinks.defaults.iframeUrl;if(thisHref[1]!==undefined){newHref+="#"+thisHref[1];}
return newHref;}
return false;},generateTarget:function(thisHref,thisLinkObj){if((thisHref[0].indexOf(location.host)!==-1)&&(thisLinkObj.hasClass("js-never-frame")===false)){return false;}
return"_blank";}};var filterInputs={init:function(){if(jQuery(".js-filter-inputs").length>0){filterInputs.hideFilters();}},hideFilters:function(){var filter="";var thisVal="";jQuery(".js-filter-inputs").each(function(){filter=$(this).data('show-value');jQuery(this).find('input').each(function(){thisVal=$(this).val();if(filter.indexOf(thisVal)<0){jQuery(this).parent().hide();}});jQuery(this).show();});}};var handleGlobalEvents={init:function(){handleGlobalEvents.jsToggle();},jsToggle:function(){$(document).on('click','.js-toggle',function(e){e.preventDefault();});}};var formTags={init:function(){if(jQuery(".js-form-tags").length>0){initFormTags.applyEvents();}},applyEvents:function(){var thisList="";var target="";var urlParam="";var newValue=""
$('.js-form-tags').each(function(){thisList=this;target=$('#'+$(thisList).data('target'));$(this).find('a').each(function(){urlParam=$.urlParam($(thisList).data('target'));if(urlParam){urlParam=urlParam.replace(/\+/g,' ');if(urlParam.indexOf($(this).text())>-1){$(this).addClass('active');}}
$(this).click(function(){$(this).toggleClass('active');newValue='';$(thisList).find('.active').each(function(){newValue=newValue+' '+$(this).text();});$(target).val(newValue);return false;});});});}};var searchableTags={init:function(){if(jQuery('.js-searchable-tags a').length>0){searchableTags.clickableTags();}},clickableTags:function(){var thisText="";var thisHref="";$('.js-searchable-tags a').each(function(){thisText=$(this).text();thisHref=$(this).attr('href');thisHref=thisHref+thisText.replace(/ /g,'_');if(thisHref.indexOf("&")!==-1){thisHref=thisHref.replace(/\&/g,'%26');}
$(this).attr('href',thisHref).addClass('js-never-frame');});}};var collapsibleContent={init:function(){if($('.faq-question').length>0){collapsibleContent.collapsible();}},collapsible:function(){$('.faq-question').click(function(e){e.preventDefault();$(this).parent().toggleClass('open').find('.faq-answer').slideToggle();return false;});}};var fixArticlePage={init:function(){var thisWrapper=null;$('.article-related-content, .all-article-content relatedContent').each(function(){thisWrapper=$(this);if($(this).find('content').length>0){$(thisWrapper).removeClass('hidden').append('<h2>Related Links</h2><ul></ul>');$(this).find('content').each(function(){$(thisWrapper).find('ul').append('<li><a href="'+window.location.pathname+'?id='+$(this).find('id').text()+'">'+$(this).find('title').text()+'</a></li>');$(this).hide();});$(thisWrapper).children('div').hide();$(thisWrapper).show();}});}};var bootstrapSlider={init:function(){bootstrapSlider.startCarousel();},startCarousel:function(){$("#bootstrap-carousel").carousel({interval:6000,pause:"hover"})}};var loadAjaxContent={defaults:{sel:".ajax-load-wrapper",errorMsg:"There was an error trying to load this content. Please try again later."},init:function(sel){if(sel===undefined){sel=loadAjaxContent.defaults.sel;}
if(jQuery(sel).length>0){loadAjaxContent.loadContent(sel);}},loadContent:function(sel){var thisEl=null;var ajaxUrl="";jQuery(sel).each(function(){thisEl=jQuery(this);ajaxUrl=thisEl.attr("data-url");if((ajaxUrl!==undefined)&&(ajaxUrl.length>0)){loadAjaxContent.showLoader(thisEl);jQuery.ajax(ajaxUrl).done(function(data){loadAjaxContent.loadSuccess(thisEl,data);}).fail(function(data){loadAjaxContent.loadError(thisEl);});}});},showLoader:function(el){el.append('<span class="ajax-loader"></span>');},loadSuccess:function(el,data){el.html(data);},loadError:function(el){el.html('<div class="form-message errors"><p>'+loadAjaxContent.defaults.err+'</p></div>');}};var loginAndCreateAccount={$loginEmailField:$("#SQ_LOGIN_USERNAME"),$createEmailField:$("div[data-name=emailCreate] input"),$resetEmailField:$("div[data-name=resetEmail] input"),$currentAccountButton:$("#SQ_LOGIN_SUBMIT"),init:function(){this.loginAndCreateAccountActions();this.loginActions();this.resetPasswordActions();},loginAndCreateAccountActions:function(){if($("[name='main_form']").length==1){$("#SQ_LOGIN_USERNAME").on("focus",function(e){loginAndCreateAccount.$currentAccountButton=$("#SQ_LOGIN_SUBMIT");});$("#create-account-form input").on("focus",function(e){loginAndCreateAccount.$currentAccountButton=$("#sq_commit_button");});loginAndCreateAccount.$loginEmailField.on("keyup paste change",function(e){if(e.type==="paste"){$that=$(this);setTimeout(function(){$that.val($that.val().toLowerCase());},100)}
if(e.keyCode!==91&&e.keyCode!==224&&e.keyCode!==17&&e.keyCode!==37&&e.keyCode!==39){var start=this.selectionStart;var end=this.selectionEnd;$(this).val($(this).val().toLowerCase());this.setSelectionRange(start,end);}});loginAndCreateAccount.$createEmailField.on("keyup paste change",function(e){if(e.type==="paste"){$that=$(this);setTimeout(function(){$that.val($that.val().toLowerCase());},100)}
if(e.keyCode!==91&&e.keyCode!==224&&e.keyCode!==17&&e.keyCode!==37&&e.keyCode!==39){var start=this.selectionStart;var end=this.selectionEnd;$(this).val($(this).val().toLowerCase());this.setSelectionRange(start,end);}});$(document).keypress(function(e){if(e.keyCode==13){if($("#search-overlay").css("display")!="block"){e.preventDefault();loginAndCreateAccount.$currentAccountButton.click();}}});}},resetPasswordActions:function(){if($("[data-name=reset-password]").length==1){loginAndCreateAccount.$resetEmailField.on("keyup",function(){$(this).val($(this).val().toLowerCase());});}},loginActions:function(){if($("body").hasClass("login")){loginAndCreateAccount.$loginEmailField.on("keyup paste change",function(e){if(e.type==="paste"){$that=$(this);setTimeout(function(){$that.val($that.val().toLowerCase());},100)}
if(e.keyCode!==91&&e.keyCode!==224&&e.keyCode!==17&&e.keyCode!==37&&e.keyCode!==39){var start=this.selectionStart;var end=this.selectionEnd;$(this).val($(this).val().toLowerCase());this.setSelectionRange(start,end);}});}}};var dualAuthCallback={cont:"#auth-2fa",alreadyTried:false,errorText:"An error has occurred, please try again later",init:function(authResult){if(jQuery(".two-auth-intro-text .le-content").length>0){jQuery(".two-auth-intro-text .le-content").remove();}
setTimeout(function(){dualAuthCallback.lock();},300);if(typeof(authResult)!=="object"){return dualAuthCallback.err("E01");}
if(authResult.success===true){return dualAuthCallback.waitForMtx();}
return dualAuthCallback.err("E0X");},err:function(errCode){dualAuthCallback.unlock();var errorWrapper=document.createElement("div");var errorDiv=document.createElement("div");errorWrapper.classList.add("le-content");errorDiv.classList.add("le-error-message");errorDiv.innerHTML=dualAuthCallback.errorText;errorWrapper.appendChild(errorDiv);var target=document.querySelector(".two-auth-intro-text");target.insertBefore(errorWrapper,target.lastChild);jQuery("body").animate({scrollTop:0},"slow");dualAuthCallback.alreadyTried=false;},waitForMtx:function(){setTimeout(function(){dualAuthCallback.testMtx();},2500);},testMtx:function(){var authUrl=jQuery(dualAuthCallback.cont).attr("data-v");jQuery.ajax({url:authUrl,error:function(){dualAuthCallback.err("E10");},success:function(data,statusText,xhr){dualAuthCallback.testMtxCallback(xhr,data);}});},testMtxCallback:function(xhr,data){if((typeof(xhr)!=="object")||(data===undefined)){return dualAuthCallback.err("E11");}
if(xhr.status!==200){return dualAuthCallback.err("E12");}
data=isJson.init(data);if(data===false){return dualAuthCallback.err("E13");}
if(data["2FA"]===false){if(dualAuthCallback.alreadyTried!==true){dualAuthCallback.alreadyTried=true;return dualAuthCallback.waitForMtx();}
else{return dualAuthCallback.err("E14");}}
if(data["2FA"]===true){return dualAuthCallback.success();}
return dualAuthCallback.err("E1X");},success:function(){dualAuthCallback.unlock();dualAuthCallback.alreadyTried=false;window.location.reload();},lock:function(){jQuery('.le-content .le-lock').addClass("locked-loader");jQuery('.le-content .le-lock, .le-content .le-lock-msg').show();},unlock:function(){jQuery('.le-content .le-lock').removeClass("locked-loader");jQuery('.le-content .le-lock, .le-content .le-lock-msg').hide();}};var navCategories={init:function(){this.showCategories();this.hideCategories();},showCategories:function(){$(".show-categories-responsive").on("click",function(event){event.preventDefault();$(this).addClass("hide");$(".section-nav").addClass("show-all",400);$('.hide-categories-responsive').removeClass("hide",400);});},hideCategories:function(){$('.hide-categories-responsive').on("click",function(event){event.preventDefault();$(this).addClass("hide");$('.show-categories-responsive').removeClass("hide",400);$("body").animate({scrollTop:0},"slow");$(".section-nav").removeClass("show-all",400);});}}
var socialMediaButtons={init:function(){$('.sign-in-facebook').on("click",function(e){document.cookie='facebook_redirect='+$(this).data("facebook-redirect")+'; path=/';});$('.sign-in-google').on("click",function(e){document.cookie='google_redirect='+$(this).data("google-redirect")+'; path=/';})}}
var requestFeedback={suffix:"SQ_DESIGN_NAME=iframe&hide_tags=true",init:function(){if(jQuery("a.comment-trigger").length===0){return false;}
setTimeout(function(){requestFeedback.start();},250);return true;},start:function(){var $commentBtn=jQuery("a.comment-trigger")
requestFeedback.btnRight($commentBtn);var rightOffset=$commentBtn.css("right");$commentBtn.hover(function(){jQuery(this).css("right","0px");},function(){jQuery(this).css("right",rightOffset);});$commentBtn.off("click.openFeedbackForm");$commentBtn.on("click.openFeedbackForm",function(e){e.preventDefault();if(jQuery("#comment-overlay").length===0){requestFeedback.addIframe(jQuery(this));}
else{var feedbackIframe=document.getElementById("js-feedback-iframe");if(requestFeedback.iframeSubmitted(feedbackIframe)===true){jQuery("#comment-overlay").remove();requestFeedback.addIframe(jQuery(this));}}
jQuery("#search-overlay").fadeIn(function(){jQuery("#comment-overlay").fadeIn();});});},iframeSubmitted:function(feedbackIframe){if(feedbackIframe===null){return false;}
var feedbackIframeContent=(feedbackIframe.contentWindow||feedbackIframe.contentDocument);if(feedbackIframeContent===null){return false;}
if(typeof(feedbackIframeContent.document)!=="object"){return false;}
feedbackIframeContent=feedbackIframeContent.document;var refNumber=feedbackIframeContent.body.querySelector("#dform_ref_display");if(refNumber===null){return false;}
var refNumberLength=refNumber.querySelector("span").textContent.length;if(refNumberLength===0){return false;}
return true;},addIframe:function(btnObj){var iframeSrc=btnObj.attr("href");if(iframeSrc.indexOf("?")===-1){iframeSrc+="?";}
else{iframeSrc+="&";}
iframeSrc+=requestFeedback.suffix;if(typeof(wssUserDetails.userToken)!=="undefined"){if(wssUserDetails.userToken.length>3){iframeSrc+="&ut="+wssUserDetails.userToken;}}
requestFeedback.templates.overlay=requestFeedback.templates.overlay.replace("{{TITLE}}",btnObj.text().trim()).replace("{{SRC}}",iframeSrc);jQuery("body").append(requestFeedback.templates.overlay);jQuery("#comment-overlay").find("button.close-overlay").off("click.close").on("click.close",function(e){e.preventDefault();jQuery("#comment-overlay").fadeOut(function(){jQuery("#search-overlay").fadeOut();});});},btnRight:function(thisBtn){setTimeout(function(){var rightOffset=thisBtn.width()-30;rightOffset="-"+rightOffset+"px";thisBtn.css("right",rightOffset);},500);}};var headerspace={init:function(){this.headers();},headers:function(){jQuery(document).on("onreadystatechange",function(){if(document.readyState==='complete'){var h=0;jQuery(".row.bottom-boxes").each(function(){h=0;jQuery(this).find('h3[class="title"]').each(function(){if(jQuery(this).height()>h){h=jQuery(this).height();}}).height(h);});}});}};var heightServices={init:function(){this.servicesList();},servicesList:function(){var h=0;$(".related-services-list").each(function(){h=0;$(this).find('li[class="list-item"]').each(function(){if($(this).height()>h){h=$(this).height();}}).height(h);});}};var articleTools={articleId:null,init:function(){articleTools.articleId=$('.inside.hide-side-col').attr('data-asset-id');articleTools.printArticle();},printArticle:function(){if($(".article-tools .cp-tools a.article-print-link").length===0){return false;}
$(".article-tools .cp-tools a.article-print-link").on("click",function(e){e.preventDefault();window.print();});}};var kblandingPage={init:function(){this.loadLhs();this.selectCategory();},loadLhs:function(){jQuery("#section-nav li a").click(function(e){e.preventDefault();var thisContent=jQuery(this).attr("data-id");if(jQuery(".latest.reload").is(":visible")===true){jQuery(".latest.reload").fadeOut(function(){jQuery("#"+thisContent).fadeIn();});}else{jQuery(".dynamic-content:visible").fadeOut(function(){jQuery("#"+thisContent).fadeIn();});}});jQuery(".close-dynamic-content").click(function(e){e.preventDefault();jQuery(this).closest(".dynamic-content").fadeOut(function(){jQuery(".latest.reload").fadeIn();});});$('.section-nav .navbar-brand').click(function(e){e.preventDefault();});},selectCategory:function(){$(".section-nav .navbar-collapse .nav li a ").click(function(e){if($("#kb-nav .navbar-toggler").is(":visible")==true){$("#kb-nav .navbar-toggler").trigger("click");}});}};var FadeInFadeOutMyAccount={init:function(){this.fadeOutSignIn();this.fadeOutRegistration();},fadeOutSignIn:function(){$(".create-account-btn").find("a").click(function(e){e.preventDefault();$("#sign-in").fadeOut("slow",function(){$("#registration").css("display","none").removeClass("hide");$("#registration").fadeIn("slow");$('#SQ_LOGIN_USERNAME').val('');$('#SQ_LOGIN_PASSWORD').val('');});var thisAction=$(this).closest("form").attr("action");if(thisAction.indexOf("?")===-1){thisAction+="?";}else{if(thisAction.slice(-1)!=="?"){thisAction+="&";}}
thisAction=thisAction.replace("error=lerest","");thisAction=thisAction.replace("?&","?").replace("&&","&");thisAction+="register=true";$(this).closest("form").attr("action",thisAction);});$(".create-account-btn").click(function(){$("#account-form-error-message").fadeOut("slow",function(){$("#account-form-error-message").css("display","none");});});},fadeOutRegistration:function(){$(".info_sign-in").find("a").click(function(e){e.preventDefault();$("#registration").fadeOut("slow",function(){$("#account-form-error-message").css("display","none");$("#account-form-error-message").fadeOut("slow");$("#sign-in").css("display","none").removeClass("hide");$("#sign-in").fadeIn("slow");$('.First-Name').val('');$('.Last-Name').val('');$('.E-mail').val('');$('.password').val('');$('.confirm-password').val('');$('.terms-checkbox').prop('checked',false);});var thisAction=$(this).closest("form").attr("action");if(thisAction.indexOf("&register=true")!==-1){thisAction=thisAction.replace("&register=true","");}
if(thisAction.indexOf("?register=true")!==-1){thisAction=thisAction.replace("?register=true","?");}
thisAction=thisAction.replace("error=lerest","");thisAction=thisAction.replace("?&","?").replace("&&","&");$(this).closest("form").attr("action",thisAction);});$(".info_sign-in").click(function(){$("#account-form-error-message").fadeOut("slow",function(){$("#account-form-error-message").css("display","none");});});},};var servicesCards={t:null,init:function(){servicesCards.views();servicesCards.servicesHeight();servicesCards.cardsNav();servicesCards.servicesMobileTitle();},servicesHeight:function(){var h=0;jQuery(".row.services-list").each(function(){if(jQuery(this).hasClass("no-equalize")===true){return false;}
h=0;jQuery(this).find("ul").each(function(){if(jQuery(this).height()>h){h=jQuery(this).height();}});jQuery(this).find("ul").height(h);});},cardsitemHeight:function(){var h=0;jQuery(".cards").each(function(){h=0;$(this).find('li[class="cards-item"]').each(function(){if($(this).height()>h){h=$(this).height();}}).height(h);});$(".cards").each(function(){$(this).find('li[class="cards-item"]').last().each(function(){$(this).css('margin-bottom','0px')});});},cardsNav:function(){var animationFlag=null;jQuery("#services-tab-nav .nav-tabs a").click(function(e){e.preventDefault();if(jQuery(this).closest("li").hasClass("active")===true){return false;}
var thidCardId=jQuery(this).attr("data-id");if(animationFlag!==null){jQuery("#services-tab-nav .nav-tabs li").removeClass("active");jQuery(this).closest("li").addClass("active");animationFlag.stop().fadeOut("fast",function(){jQuery(".tags-grouped-services").find(".a-z-list").stop().hide();animationFlag=jQuery("#"+thidCardId);animationFlag.fadeIn(function(){animationFlag=null;});});}else{jQuery("#services-tab-nav .nav-tabs li").removeClass("active");jQuery(this).closest("li").addClass("active");animationFlag=jQuery("#"+thidCardId);jQuery(".tags-grouped-services").find(".a-z-list:visible").fadeOut(function(){animationFlag.fadeIn(function(){animationFlag=null;});});}});},views:function(){jQuery("ul.services-views li a").click(function(e){e.preventDefault();if(jQuery(this).hasClass("active")===true){return false;}
jQuery("ul.services-views li a").removeClass("active");jQuery(this).addClass("active");if(jQuery(this).hasClass("tags-view")===true){jQuery(".a-z-list-wrapper").fadeOut(function(){jQuery(".tags-grouped-services").fadeIn();});}else{jQuery(".tags-grouped-services").fadeOut(function(){jQuery(".a-z-list-wrapper").fadeIn();});}});},servicesMobileTitle:function(){$('.tags-grouped-services .section-tab-nav .navbar-brand').click(function(e){e.preventDefault();});var title;$(".section-tab-nav .nav .navbar-item.normal  a").click(function(){if($(".tags-grouped-services .section-tab-nav .navbar-toggler").is(":visible")==true){$(".tags-grouped-services .section-tab-nav .navbar-toggler").trigger("click");}
title=$(this).text().trim();$(".tags-grouped-services .section-tab-nav h2").fadeOut(function(){$(this).text("Category: "+title+"").fadeIn();});});}};var servicesSearchResults={t:null,list:[],init:function(){servicesSearchResults.searchBox();},searchBox:function(){jQuery(".services-list .a-z-list .cards li a").each(function(){servicesSearchResults.list.push({"label":jQuery(this).text().trim(),"value":jQuery(this).attr("href"),"icon":jQuery(this).find("i.fa").attr("class").trim()});});$('.a-z-list-services .az-list-box h2 a').click(function(e){e.preventDefault();});var results=$('#services-input').val('');$('.s-results').text('Results for: '+results);servicesSearchResults.t=jQuery("#services-input").keyup(function(){jQuery(".a-z-pagination, .a-z-list-services:not(.results)").fadeOut(function(){jQuery(".services-search-results").fadeIn();});servicesSearchResults.searchResults();var results=$('#services-input').val();$('.s-results').text('Results for: '+results);});jQuery("#services-input").blur(function(){if(jQuery(this).val()===""){jQuery(".services-search-results").fadeOut(function(){jQuery(".a-z-pagination, .a-z-list-services:not(.results)").fadeIn();});}});},searchResults:function(){$.widget("ui.autocomplete",$.ui.autocomplete,{options:{renderItem:null,renderMenu:null},_renderItem:function(ul,item){if($.isFunction(this.options.renderItem))
return this.options.renderItem(ul,item);else
return this._super(ul,item);},_renderMenu:function(ul,items){if($.isFunction(this.options.renderMenu)){this.options.renderMenu(ul,items);}
this._super(ul,items);},});var Menu_Base=function(ul,items){$('.services-search-results .col-md-12 .a-z-list.results').append(ul);$('.ui-menu').addClass('dropdown');},Item_Initialize=function(ul,item){return $('<li>').append($("<a>").html("<i class='"+item.icon+"'></i>"+item.label+"")).appendTo(ul);};$("#services-input").autocomplete({source:servicesSearchResults.list,minLength:3,select:function(event,ui){event.preventDefault();$("#services-input").val(ui.item.label);window.location=ui.item.value;},response:function(event,ui){if(ui.content.length===0){$('.a-z-list.results .no-result').remove();$('.a-z-list.results').append('<ul class="no-result"></ul>');$('.a-z-list.results .no-result').append('<li></li>');$('.a-z-list.results .no-result li').html('No Result');}else{$('.a-z-list.results .no-result').remove();}},change:function(){if(($('#services-input').val().length>=3)&&($('.a-z-list.results .no-result').length!==1)){$(".ui-autocomplete").show();}else{$(".ui-autocomplete").hide();}},close:function(){if(($('#services-input').val().length>=3)&&($('.a-z-list.results .no-result').length!==1)){$(".ui-autocomplete").show();}else{$(".ui-autocomplete").hide();}},renderMenu:Menu_Base,renderItem:Item_Initialize,});$('.search-area .input-group .input-group-btn').find('.btn').click(function(){$('#services-input').autocomplete('option','minLength',3);$('#services-input').autocomplete('search',$('#services-input').val());});$('#services-input').keypress(function(e){var key=e.which;if(key==13)
{$('#services-input').autocomplete('option','minLength',3);$('#services-input').autocomplete('search',$('#services-input').val());}});}};var focusTabindex={init:function(){focusTabindex.setfocus();},setfocus:function(){$('#close-search').on('focusout.next',function(){if($('.show-all-container').is(':visible')){$('#search-form #overlay-query').focus();}else{$('#search-form #overlay-query').focus();}});$('#close-search').on('click',function(){$('#overlay-query').focusout();$('#close-search').focusout();});}};requestFeedback.templates={};requestFeedback.templates.overlay=""+"\n <div id='comment-overlay'>"+"\n   <button class='close-overlay btn btn-primary'>X</button>"+"\n   <div class='clearfix'></div>"+"\n   <div class='overlay-content iframe-placeholder'>"+"\n     <iframe id='js-feedback-iframe' src='{{SRC}}' seamless='seamless' title='{{TITLE}}'>Browser not compatible.</iframe>"+"\n   </div>"+"\n </div>";fixLinks.init();filterInputs.init();handleGlobalEvents.init();formTags.init();searchableTags.init();collapsibleContent.init();fixArticlePage.init();bootstrapSlider.init();loadAjaxContent.init();loginAndCreateAccount.init();navCategories.init();socialMediaButtons.init();requestFeedback.init();headerspace.init();heightServices.init();kblandingPage.init();FadeInFadeOutMyAccount.init();servicesCards.init();servicesSearchResults.init();articleTools.init();focusTabindex.init();
var dforms={formDetails:{dFormObj:null,form:null,type:null,custom:null,ref:null,query:null},options:{formAjaxUrl:"/form/widget/{{type}}{{form}}{{custom}}?token={{token}}{{ref}}{{query}}",errorMsg:"Something went wrong and the form could not be loaded. Please try again later.",errorPattern:"<div class='error-message'><p>{{errorMsg}}</p></div>"},init:function(){if(jQuery('#dform_squiz').length>0){jQuery('#dform_squiz').each(function(){dforms.startForm(jQuery(this));})}},startForm:function(thisForm){dforms.formDetails.dFormObj=thisForm;dforms.formDetails.form=thisForm.data('form');dforms.formDetails.type=thisForm.data('type');dforms.formDetails.custom=thisForm.data('custom');dforms.formDetails.ref=thisForm.data('ref');dforms.formDetails.query=thisForm.data('query');if((dforms.formDetails.query===undefined)||(dforms.formDetails.query===null)){dforms.formDetails.query="";}
else{if((dforms.formDetails.query.charAt(0)!=="&")&&(dforms.formDetails.query!=="")){dforms.formDetails.query="&"+dforms.formDetails.query;}}
if((dforms.formDetails.custom!=="")&&(dforms.formDetails.type==="auto/")){dforms.formDetails.custom="/custom/"+dforms.formDetails.custom;}
else{dforms.formDetails.custom="";}
var ajaxURL=dforms.buildAjaxUrl();jQuery.ajax({url:ajaxURL}).done(function(data){dforms.formDetails.dFormObj.html(data);}).fail(function(data){var msg=dforms.options.errorPattern;msg=msg.replace("{{errorMsg}}",dforms.options.errorMsg);dforms.formDetails.dFormObj.html(msg);});},buildAjaxUrl:function(){var url=dforms.options.formAjaxUrl;url=url.replace("{{type}}",dforms.formDetails.type).replace("{{form}}",dforms.formDetails.form);url=url.replace("{{custom}}",dforms.formDetails.custom).replace("{{ref}}",dforms.formDetails.ref);url=url.replace("{{query}}",dforms.formDetails.query);var token="";if((wssUserDetails!==undefined)&&(wssUserDetails.userToken!==undefined)){if(wssUserDetails.userToken!==""){token=wssUserDetails.userToken;}
else{if($.urlParam("SQ_DESIGN_NAME")==="iframe"){token=$.urlParam("ut");if(token===null){token="";}}}}
else{token="";}
url=url.replace("{{token}}",token);return url;}};
var wssUserDetails={"userLoggedIn":null,"userData":null,"userId":null,"userJSON":null,"userToken":"","fbid":false};var wssUpdateUsername={defaults:{usernameFieldClass:".real-username-field"},init:function(field){var thisVal=jQuery(field).val();jQuery(field).closest('form').find(wssUpdateUsername.defaults.usernameFieldClass).val(thisVal);}};function updateUsername(field){wssUpdateUsername.init(field);}
var autoFillFields={init:function(){var currentVal="";$('.auto-fill').each(function(){currentVal=$(this).data('current-val');$(this).val(currentVal);});}};var wssUserData={options:{userDataWrapperSel:".js-user-data"},init:function(){var usrDataObj=jQuery(wssUserData.options.userDataWrapperSel);if((usrDataObj!==undefined)&&(usrDataObj.attr("data-url")!==undefined)&&(usrDataObj.attr("data-url").length>0)){wssUserData.loadData(usrDataObj);}
else{if(typeof(dforms)==="object"){dforms.init();}}},loadData:function(usrDataObj){jQuery.ajax({url:usrDataObj.attr("data-url"),cache:false}).done(function(data){usrDataObj.html(data);wssUserDetails.userData=jQuery("#user-data");wssUserDetails.userLoggedIn=jQuery(wssUserDetails.userData).length===1?true:false;if(wssUserDetails.userData!==null){wssUserDetails.userId=jQuery(wssUserDetails.userData).attr("data-id");wssUserDetails.userJSON=jQuery(wssUserDetails.userData).attr("data-user-json");wssUserDetails.userToken=jQuery(wssUserDetails.userData).attr("data-matrix-token");wssUserDetails.accountUser=jQuery(wssUserDetails.userData).attr("data-account-user");wssUserDetails.fbid=jQuery(wssUserDetails.userData).attr("data-fbid");wssUserDetails.ll=jQuery(wssUserDetails.userData).attr("data-ll");if(typeof(wssUserPersonalisation)==="object"){wssUserPersonalisation.init();}
if(typeof(wssP)==="object"){wssP.init();}
if(typeof(termsandConditions)==="object"){termsandConditions.init();}}
if(typeof(dforms)==="object"){dforms.init();}
if(wssUserDetails.userLoggedIn===true){wssUserData.loadForLoggedIn();}
else{wssUserData.loadForNotLoggedIn();}});},loadForLoggedIn:function(){if(typeof(fbSearchCart)==="object"){if(typeof(fbSearchCart.init)==="function"){fbSearchCart.init();}}
if(typeof(KBHelpfulRating)==="object"){if(typeof(KBHelpfulRating.init)==="function"){KBHelpfulRating.init();}}},loadForNotLoggedIn:function(){if(typeof(KBHelpfulRating)==="object"){if(typeof(KBHelpfulRating.init)==="function"){KBHelpfulRating.init();}}}};var wssUserPersonalisation={sel:{articleSel:".js-article-page",dformSel:"#dform_squiz"},defaults:{userJSONFieldID:210},init:function(){if(wssUserDetails.userJSON===""||wssUserDetails.userJSON===undefined){wssUserDetails.userJSON={};}else{wssUserDetails.userJSON=JSON.parse(wssUserDetails.userJSON);}
if(wssUserDetails.userLoggedIn===true){if(jQuery(wssUserPersonalisation.sel.articleSel).length>0){wssUserPersonalisation.addRecentAsset("articles");}
else if(jQuery(wssUserPersonalisation.sel.dformSel).length>0){wssUserPersonalisation.addRecentAsset("forms");}}},addRecentAsset:function(assetType){if(typeof(js_api)!=="object"){return false;}
var currentAssetID=jQuery('body').data('asset-id');var notFoundAsset=jQuery("#footer-scripts").data("nf");if(currentAssetID!==notFoundAsset){wssUserPersonalisation.saveRecentAsset(assetType,currentAssetID);}},saveRecentAsset:function(assetType,currentAssetID){if(typeof(wssUserDetails.userJSON.recent_assets)==="undefined"){wssUserDetails.userJSON={recent_assets:{forms:[],articles:[]}};}
var assetsArray=wssUserDetails.userJSON.recent_assets[assetType];var inArray=false;var inArrayIndex=0;assetsArray.some(function(entry){if(entry==currentAssetID){inArray=true;inArrayIndex=assetsArray.indexOf(entry);return true;}});if(inArray===true){assetsArray.moveInArray(inArrayIndex,0);}
else{assetsArray.unshift(currentAssetID);assetsArray.splice(3,4);}
wssUserDetails.userJSON.recent_assets[assetType]=assetsArray;var userJsonFieldId=wssUserPersonalisation.defaults.userJSONFieldID;if((metadataFieldIDs!==undefined)&&(metadataFieldIDs.userJSON!==undefined)){userJsonFieldId=metadataFieldIDs.userJSON;}
js_api.setMetadata({"asset_id":wssUserDetails.userId,"field_id":userJsonFieldId,"field_val":JSON.stringify(wssUserDetails.userJSON),"dataCallback":function(data){}});}};autoFillFields.init();wssUserData.init();
var dynamicSeachPage={checkedPublishedDateInput:$("#facet-date_published").find("input:checked").first(),prevQuery:"",init:function(){if((jQuery("#search-container")!==undefined)&&(jQuery("#search-container").hasClass("agent-desktop")===true)){return false;}
if(jQuery("form#form-search").length>0){dynamicSeachPage.attachEvents();dynamicSeachPage.overlay.init();jQuery("body > .searchbox-trigger").fadeOut(function(){jQuery(this).remove();});dynamicSeachPage.storeInitState();return true;}},attachEvents:function(){dynamicSeachPage.prevQuery=jQuery("#search-terms").val();jQuery("form#form-search ul.nice-checkboxes li input[type='radio']").off("change.submitSection");jQuery("form#form-search ul.tags li input[type='checkbox']").off("change.submitTopic");jQuery("form#form-search button[type='submit']").off("click.submitForm");jQuery("form#form-search .pagination-container li a").off("click.paginate");jQuery("body").off("click.autocomplete",".ui-autocomplete .ui-menu-item");jQuery("form#form-search #related_searches a").off("click.loadResults");jQuery("button.within-submit").off("click.submitQuery");jQuery("form#form-search #related_searches a").on("click.loadResults",function(e){e.preventDefault();var relUrl=jQuery("#search-container").attr("data-url")+jQuery(this).attr("href");dynamicSeachPage.loadRelSearch(relUrl);});jQuery("form#form-search ul.nice-checkboxes li input[type='radio']").on("change.submitSection",function(e){dynamicSeachPage.loadResults($(this));});jQuery("form#form-search ul.tags li input[type='checkbox']").on("change.submitTopic",function(e){dynamicSeachPage.loadResults($(this));});jQuery("form#form-search button[type='submit']").on("click.submitForm",function(e){e.preventDefault();dynamicSeachPage.loadResults($(this));});jQuery("button.within-submit").on("click.submitQuery",function(e){e.preventDefault();dynamicSeachPage.loadResults($(this));});jQuery("form#form-search .pagination-container li a").on("click.paginate",function(e){e.preventDefault();var url=jQuery(this).attr("href");dynamicSeachPage.paginate(url);});jQuery(window).off("popstate.search")
jQuery(window).on("popstate.search",function(e){if(e.originalEvent.state!==null){if(typeof(e.originalEvent.state)!=="undefined"){dynamicSeachPage.popResults(e.originalEvent.state);}}});var autocompleteURL=$("#search-container").attr("data-autocompletion-url");if(!(autocompleteURL===""||autocompleteURL===undefined)){jQuery('#search-container').on("keyup",'input.query',function(e){$(this).fbcompletion({'enabled':'enabled','standardCompletionEnabled':true,'collection':'','program':autocompleteURL,'format':'extended','alpha':'0.5','show':'10','sort':'0','length':'3','delay':'0','profile':'_default','searchBasedCompletionEnabled':false,'searchBasedCompletionProgram':'../s/search.json','loggin':'disabled','selectLogging':'disabled','dwellLogging':'disabled','interactionLog':''})});}
jQuery("body").on("click.autocomplete",".ui-autocomplete .ui-menu-item",function(e){var query=$(this).text();$("#search-container input.query").val(query);dynamicSeachPage.loadResults();});},loadRelSearch:function(relUrl){if(typeof(relUrl)!=="string"){return false;}
dynamicSeachPage.overlay.show();jQuery.ajax({url:relUrl,error:function(){dynamicSeachPage.overlay.hide();},success:function(content){dynamicSeachPage.showResults(content,relUrl);}});return true;},loadResults:function(element){if(element!=undefined){dynamicSeachPage.datePublishedFacetHandling(element);}
if(dynamicSeachPage.prevQuery!==jQuery("#search-terms").val()){jQuery("input.search-input.search-within").val("");}
var formData=jQuery("#form-search").serialize();var actionUrl=jQuery("#search-container").attr("data-url");if((actionUrl===undefined)||(actionUrl==="")){actionUrl=window.location.href.split("#")[0].split("?")[0];formData="&SQ_ASSET_CONTENTS_RAW";}
dynamicSeachPage.overlay.show();jQuery.ajax({url:actionUrl,data:formData,error:function(){dynamicSeachPage.overlay.hide();},success:function(content){dynamicSeachPage.showResults(content,formData,element);}});},paginate:function(url){var suffix="SQ_ASSET_CONTENTS_RAW";if(url.indexOf(suffix)!==-1){suffix="";}
var query=url.split("?")[1];if(query.indexOf("form=wss")!==-1){query=query.replace("form=wss&","");}
var h=jQuery("#search-container").attr("data-url");if((h!==undefined)||(h!=="")){url=h+"?"+query;suffix="";}
dynamicSeachPage.overlay.show();jQuery.ajax({url:url,data:suffix,error:function(){dynamicSeachPage.overlay.hide();},success:function(content){dynamicSeachPage.showResults(content,url);}});},showResults:function(content,formData,targetElement){jQuery("#main-col section.asset-contents-section").html(content);if(targetElement!=undefined&&targetElement.parents("#facet-date_published").length!=0){dynamicSeachPage.datePublishedFacetHandling(targetElement);}
dynamicSeachPage.overlay.hide();dynamicSeachPage.attachEvents();if((typeof(wssP)==="object")&&(typeof(pcfg)==="object")){if(typeof(wssP.reloadSearchResults)==="function"){wssP.reloadSearchResults();}}
dynamicSeachPage.updateUrlState(formData);dynamicSeachPage.bookmarkFix();},datePublishedFacetHandling:function(element){var targetId=element.attr("id");var targetValue=element.val();var facetDatePublished=$("#facet-date_published");$(facetDatePublished).find("input").each(function(){if(($(this).attr("id")!=targetId)&&($(this).val()==targetValue)){$(this).attr("checked",false);}else if($(this).attr("id")!=targetId){if(element.closest(".panel-default").attr("id")!="facet-date_published"){if($(this).attr("id")!=dynamicSeachPage.checkedPublishedDateInput.attr("id")){$(this).attr("checked",false);}}else{$(this).attr("checked",false);}}});dynamicSeachPage.checkedPublishedDateInput=facetDatePublished.find("input:checked");},overlay:{html:"<div id='search-page-overlay' style='display: none'></div>",init:function(){jQuery("#main-col").append(dynamicSeachPage.overlay.html);},show:function(){jQuery("#search-page-overlay").show();},hide:function(){jQuery("#search-page-overlay").hide();}},updateUrlState:function(queryString){if(typeof(queryString)!=="string"){return false;}
if(queryString.indexOf("?")!==-1){queryString=queryString.split("?")[1];}
if(typeof(history.pushState)!=="function"){return false;}
var newUrl=window.location.href.split("#")[0];newUrl=newUrl.split("?")[0];newUrl=newUrl+"?"+queryString;var data={path:newUrl,html:jQuery("#main-col section.asset-contents-section").html()};window.history.pushState(data,'',newUrl);return true;},popResults:function(popItem){if(typeof(popItem)==="undefined"){location.reload();}
if(typeof(popItem.html)==="undefined"){location.reload();}
jQuery("#main-col section.asset-contents-section").html(popItem.html);dynamicSeachPage.attachEvents();},storeInitState:function(){if(typeof(history.replaceState)!=="function"){return false;}
var data={path:window.location.href,html:jQuery("#main-col section.asset-contents-section").html()};history.replaceState(data,document.title,document.location.href);},bookmarkFix:function(){if(typeof(fbSearchCart)!=="object"){return false;}
if(typeof(fbSearchCart.searchPageSetup)!=="function"){return false;}
fbSearchCart.searchPageSetup();}};dynamicSeachPage.init();
var accordion={expandLink:".expand-all",collapseLink:".collapse-all",init:function(){$(".accordion").addClass("js-enabled");$(accordion.collapseLink).show();accordion.anchorScroll();accordion.collapseAndExpand();if($(accordion.collapseLink).length==0){$(".accordion").find(".accordion-toggle").each(function(){$(this).trigger("click");});}else{$(accordion.collapseLink).trigger("click");}},anchorScroll:function(){$(".back-top-link").on('click',function(event){event.preventDefault();$('html, body').animate({scrollTop:$($.attr(this,'href')).offset().top},500);});$(".anchor-item").on('click',function(event){event.preventDefault();$('html, body').animate({scrollTop:$($.attr(this,'href')).offset().top},500);});},expandAll:function(){$(accordion.expandLink).on("click",function(e){e.preventDefault();$('.accordionItems').find('.panel-collapse').removeClass("collapse");$('.accordionItems').find('.panel-collapse').css("height","");$('.accordionItems').find('.panel-collapse').addClass("collapse in");$('.accordionItems').find('.panel-collapse').attr("aria-expanded","true");$('.accordionItems').find('.accordion-toggle').removeClass("collapsed")
$('.accordionItems').find('.accordion-toggle').attr("aria-expanded","true");$(this).css("display","none");$(this).parents(".accordion").find(accordion.collapseLink).css("display","inline");});},collapseAll:function(){$(accordion.collapseLink).on("click",function(e){e.preventDefault();$('.accordionItems').find('.accordion-toggle').addClass("collapsed")
$('.accordionItems').find('.accordion-toggle').attr("aria-expanded","false");$('.accordionItems').find('.panel-collapse').removeClass("collapse in");$('.accordionItems').find('.panel-collapse').addClass("collapse");$('.accordionItems').find('.panel-collapse').attr("aria-expanded","false");$('.accordionItems').find('.panel-collapse').css("height","0px");$(this).css("display","none");$(this).parents(".accordion").find(accordion.expandLink).css("display","inline");});},collapseAndExpand:function(){accordion.expandAll();accordion.collapseAll();},}
accordion.init();
var KBHelpfulRating={debug:true,ajaxURL:null,articleID:null,loginRedirectURL:null,yesValue:0,noValue:0,allowedToVote:false,init:function(){if(jQuery("#kb-rating").length===0){return false;}
if(typeof(aidRating)!=="object"){KBHelpfulRating.log("No aidRating object available. Please check the user status endpoint why this is missing.")
return KBHelpfulRating.blockRating();}
KBHelpfulRating.voteEvents();return KBHelpfulRating.getRatingInfo();},getRatingInfo:function(){KBHelpfulRating.articleID=jQuery(".js-article-page").data("id");KBHelpfulRating.ajaxURL=jQuery("#kb-rating").attr("data-ws");KBHelpfulRating.loginRedirectURL=jQuery('.js-article-page').data("login-redirect");KBHelpfulRating.yesValue=parseInt(aidRating.y,10);KBHelpfulRating.noValue=parseInt(aidRating.n,10);jQuery("#kb-rating .helpful-yes-value").text(KBHelpfulRating.yesValue)
jQuery("#kb-rating .helpful-no-value").text(KBHelpfulRating.noValue);KBHelpfulRating.allowedToVote=aidRating.v.toUpperCase();},blockRating:function(){jQuery("#kb-rating .helpful-yes, #kb-rating .helpful-no").off("click.vote");jQuery("#kb-rating .helpful-yes, #kb-rating .helpful-no").on("click.vote",function(e){e.preventDefault();});},voteEvents:function(){jQuery("#kb-rating .helpful-yes").off("click.vote");jQuery("#kb-rating .helpful-no").off("click.vote");jQuery("#kb-rating .helpful-yes").on("click.vote",function(e){e.preventDefault();KBHelpfulRating.testVoting("yes");});jQuery("#kb-rating .helpful-no").on("click.vote",function(e){e.preventDefault();KBHelpfulRating.testVoting("no");});},testVoting:function(voteValue){switch(KBHelpfulRating.allowedToVote){case"P":KBHelpfulRating.requestLogin();break;case"N":KBHelpfulRating.userAlreadyVoted();break;case"Y":KBHelpfulRating.sendVote(voteValue);break;default:break;}},sendVote:function(voteValue){jQuery.ajax({url:KBHelpfulRating.ajaxURL,type:"POST",data:{"articleID":KBHelpfulRating.articleID,"userID":wssUserDetails.userId,"vote":voteValue},success:function(res){KBHelpfulRating.allowedToVote="N";if(voteValue==="yes"){jQuery(".helpful-yes-value").text(++KBHelpfulRating.yesValue);}
else{jQuery(".helpful-no-value").text(++KBHelpfulRating.noValue);}
KBHelpfulRating.thankYouPopup();}});},thankYouPopup:function(){if(typeof(swal)!=="function"){return false;}
swal({title:editPopupArticleRating.title_succes_message_after_vote,text:editPopupArticleRating.succes_message_after_vote,timer:3000,showConfirmButton:false,type:"success"});return true;},userAlreadyVoted:function(){if(typeof(swal)!=="function"){return false;}
swal({title:editPopupArticleRating.title_failure_message_after_vote,text:editPopupArticleRating.failure_message_after_vote,timer:3000,showConfirmButton:false,type:"error"});return true;},requestLogin:function(){if(typeof(swal)!=="function"){return false;}
swal({title:editPopupArticleRating.title_message_not_logged_in,text:editPopupArticleRating.message_not_logged_in,type:"warning",showCancelButton:true,confirmButtonColor:"#55b8cf",confirmButtonText:"Sign In",closeOnConfirm:false},function(){window.location.href=KBHelpfulRating.loginRedirectURL;});return true;},log:function(msg){if(KBHelpfulRating.debug!==true){return false;}
console.log(msg);}};
jQuery.validator.addMethod("passwordFormat",function(value,element){if((value.length<10)){return false;}
if(/\d/.test(value)===false){return false;}
if(/[a-z]/.test(value)===false){return false;}
if(/[A-Z]/.test(value)===false){return false;}
return true;},"Password format is incorrect");jQuery.validator.addMethod("customEmail",function(value,element){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(value)},"Email format is incorrect");var myAccountValidation={debug:false,validator:null,sel:{switchButtons:"#sign-in .button-create, #registration .sign-in-switch",signIn:".asset-contents #sign-in-form",register:".asset-contents #registration",signInSubmit:"#SQ_LOGIN_SUBMIT[name='SQ_LOGIN_SUBMIT']",registerSubmit:"#sq_commit_button[name='sq_commit_button']"},init:function(){if(document.location.href.indexOf("/_admin")!==-1){return false;}
if(document.location.href.indexOf("/_edit")!==-1){return false;}
if(jQuery(myAccountValidation.sel.signIn).length===0){return false;}
if(typeof(jQuery().validate)!=="function"){return false;}
var ccode=myAccountValidation.getCountryCode();myAccountValidation.prepareForm();myAccountValidation.log("All initial conditions met, we can start validation with country code: "+ccode);return myAccountValidation.start(ccode);},prepareForm:function(){jQuery(myAccountValidation.sel.signIn).closest("form").removeAttr("onsubmit");},start:function(ccode){var myAccountForm=jQuery(myAccountValidation.sel.signIn).closest("form");if(myAccountForm.length===0){return false;}
var options={ignore:":not(:visible)",submitHandler:function(form){form.submit();},errorPlacement:function(error,element){var elType=jQuery(element).attr("type");if(elType==="checkbox"){var h=jQuery(element).closest("div.row").find("span.required");if(h.length>0){error.insertAfter(h);}
else{error.insertAfter(element)}}
else{error.insertAfter(element);}}};myAccountValidation.validator=myAccountForm.validate(options)
if(jQuery(myAccountValidation.sel.signIn).is(":visible")===true){signInValidation.init(ccode);}
else{registerValidation.init(ccode);}
jQuery(myAccountValidation.sel.switchButtons).off("click.bindValidator");jQuery(myAccountValidation.sel.switchButtons).on("click.bindValidator",function(){setTimeout(function(){myAccountValidation.restart();},1000);});jQuery(myAccountValidation.sel.signInSubmit).removeAttr("onclick").off("click.formSubmit");jQuery(myAccountValidation.sel.signInSubmit).on("click.formSubmit",function(e){e.preventDefault();var isFormValid=myAccountForm.valid();if(isFormValid===false){return false;}
jQuery("input[id$='_ASSET_BUILDER_ACTION']").val("login");jQuery("input#SQ_ACTION").val("login");myAccountForm.submit();});jQuery(myAccountValidation.sel.registerSubmit).removeAttr("onclick").off("click.formSubmit");jQuery(myAccountValidation.sel.registerSubmit).on("click.formSubmit",function(e){e.preventDefault();var isFormValid=myAccountForm.valid();if(isFormValid===false){return false;}
jQuery("input[id$='_ASSET_BUILDER_ACTION']").val("create");jQuery("input#SQ_ACTION").val("");myAccountForm.submit();});return true;},restart:function(){if(myAccountValidation.validator!==null){myAccountValidation.validator.destroy();myAccountValidation.validator=null;}
myAccountValidation.log("Initial validator destroyed... re-initializing validator.");myAccountValidation.init();},getCountryCode:function(){return"EN";},log:function(msg){if(myAccountValidation.debug!==true){return false;}
console.log(msg);}};var signInValidation={init:function(ccode){if(typeof(ccode)==="undefined"){ccode="EN";}
myAccountValidation.log("Applying Sign In rules...");var messages=vSignInCfg[ccode];jQuery("#SQ_LOGIN_USERNAME").rules("add",{"required":true,"messages":{"required":messages["SQ_LOGIN_USERNAME"].required}});jQuery("#SQ_LOGIN_PASSWORD").rules("add",{"required":true,"messages":{"required":messages["SQ_LOGIN_PASSWORD"].required}});}};var registerValidation={init:function(ccode){if(typeof(ccode)==="undefined"){ccode="EN";}
myAccountValidation.log("Applying Registration rules...");var messages=vRegisterCfg[ccode];jQuery("input[name='user_0_591']").rules("add",{"required":true,"messages":{"required":messages["fname"].required}});jQuery("input[name='user_0_592']").rules("add",{"required":true,"messages":{"required":messages["lname"].required}});jQuery("input[name='user_0_593']").rules("add",{"required":true,"customEmail":true,"messages":{"required":messages["email"].required,"customEmail":messages["email"].email}});jQuery("input[name='user_0_590_one']").rules("add",{"required":true,"minlength":10,"passwordFormat":true,"messages":{"required":messages["pwd"].required,"minlength":messages["pwd"].minlength,"passwordFormat":messages["pwd"].passwordFormat,}});jQuery("input[name='user_0_590_two']").rules("add",{"required":true,"equalTo":"#user_0_590_one","messages":{"required":messages["confirmPwd"].required,"equalTo":messages["confirmPwd"].equalTo}});jQuery("#t_and_c").rules("add",{"required":true,"messages":{"required":messages["t_and_c"].required}});}};var resetPassword={ccode:"EN",sel:{resetPwdForm:"form[id^='page_password_reset_']"},init:function(){if((jQuery(resetPassword.sel.resetPwdForm).length>0)&&(jQuery("#username").length>0)){resetPassword.getCountryCode();resetPassword.initScreenValidation();}
if((jQuery(resetPassword.sel.resetPwdForm).length>0)&&(jQuery("#confirm-password").length>0)){resetPassword.getCountryCode();resetPassword.pwdScreenValidation();}},getCountryCode:function(){return"EN";},initScreenValidation:function(){var messages=vResetPwd[resetPassword.ccode];jQuery(resetPassword.sel.resetPwdForm).validate({rules:{username:{required:true,customEmail:true}},messages:{username:{required:messages.username.required,customEmail:messages.username.email}},submitHandler:function(form){form.submit();jQuery(resetPassword.sel.resetPwdForm).find("input[type='submit']").attr("disabled","disabled");}});},pwdScreenValidation:function(){var messages=vResetPwd[resetPassword.ccode];jQuery(resetPassword.sel.resetPwdForm).validate({submitHandler:function(form){form.submit();jQuery(resetPassword.sel.resetPwdForm).find("input[type='submit']").attr("disabled","disabled");}});jQuery("input#password").rules("add",{"required":true,"minlength":8,"passwordFormat":true,"messages":{"required":messages["pwd"].required,"minlength":messages["pwd"].minlength,"passwordFormat":messages["pwd"].passwordFormat,}});jQuery("input#confirm-password").rules("add",{"required":true,"equalTo":"#password","messages":{"required":messages["confirmPwd"].required,"equalTo":messages["confirmPwd"].equalTo}});}};var vSignInCfg={"EN":{"SQ_LOGIN_USERNAME":{"required":"Email field is required"},"SQ_LOGIN_PASSWORD":{"required":"Password field is required"}}};var vRegisterCfg={"EN":{"fname":{"required":"First name field is required"},"lname":{"required":"Last name field is required"},"email":{"required":"Email field is required","email":"Email field must use valid email format"},"pwd":{"required":"Password field is required","minlength":"Password is too short","passwordFormat":"Password format is incorrect"},"confirmPwd":{"required":"Confirm Password field is required","equalTo":"Confirm password field must match Password field"},"t_and_c":{"required":"Please accept Terms and Conditions"}}};var vResetPwd={"EN":{"username":{"required":"Email field is required","email":"Incorrect email format"},"pwd":{"required":"Password field is required","minlength":"Password is too short","passwordFormat":"Password format is incorrect"},"confirmPwd":{"required":"Confirm Password field is required","equalTo":"Confirm password field must match Password field"}}};myAccountValidation.init();resetPassword.init();
var searchOverlay={init:function(){if(jQuery("#search-form").length===0){return false;}
searchOverlay.attachGlobalEvents();if(jQuery("body").hasClass("home")===true){searchOverlay.attachOutsideHomeEvents();}
else{searchOverlay.attachOutsideEvents();}},attachOutsideEvents:function(isThisHome){jQuery("body").on("click.showOverlay","a.searchbox-trigger, a#search",function(e){e.preventDefault();jQuery('html, body').animate({scrollTop:0},800);searchOverlay.showOverlay(false);});},attachOutsideHomeEvents:function(){jQuery("body").on("focus.showOverlay, click.showOverlay","#search-form .query, .search-toggle",function(e){if(jQuery(this).hasClass("ov")===false){searchOverlay.showOverlay(true);}});jQuery("body").on("keyup.searchOverlay","#search-form .query",function(e){var keycode=e.keyCode;var validKeyCode=(keycode>47&&keycode<58)||(keycode>64&&keycode<91)||(keycode>95&&keycode<112)||(keycode>185&&keycode<193)||(keycode>218&&keycode<223);if(keycode===8){validKeyCode=true;}
if((jQuery(this).hasClass("ov")===false)&&(validKeyCode===true)){searchOverlay.showOverlay(true);}});},attachGlobalEvents:function(){jQuery(".navbar-header .btn.search-toggle").on("click.showOverlay",function(e){e.preventDefault();searchOverlay.showOverlay(false);});jQuery("body").on("click.closeOverlay","#search-form .close-search",function(e){e.preventDefault();searchOverlay.closeOverlay(jQuery("body").hasClass("home"));});jQuery("body").on("mouseenter.showClear","#search-form .clear-query.show",function(e){jQuery(this).addClass("hover");});jQuery("body").on("mouseleave.hideClear","#search-form .clear-query.show",function(e){jQuery(this).removeClass("hover");});jQuery("body").on("click.clearQuery","#search-form .clear-query.show",function(e){e.preventDefault();jQuery("#search-form .query").val("").trigger("focus");jQuery(this).removeClass("show hover");jQuery("#search-form .results-placeholder").html("");});jQuery("body").on("keyup.showClear","#search-form .query",function(e){searchOverlay.showClear();});jQuery("#search-form input.query").autocomplete({source:function(request,response){var thisQuery=jQuery("#search-form input.query").val();jQuery.ajax({url:search_settings.ajaxUrl,type:"GET",data:"query="+thisQuery,success:function(data){searchOverlay.showResults(data);},error:function(){searchOverlay.showError();}});},delay:300,search:function(event,ui){jQuery("#search-form .loading-results").show();},open:function(event,ui){jQuery("#search-form .loading-results").hide();},close:function(event,ui){jQuery("#search-form .loading-results").hide();},minLength:3});},showOverlay:function(isThisHome){jQuery("#search-form .close-search").hide().fadeIn();jQuery("#search-overlay").fadeIn();jQuery("#search-form .loading-results").hide();jQuery("#search-form .results-placeholder").fadeIn();jQuery("#search-form .query").addClass("ov");if(isThisHome===true){jQuery("#search-form").removeClass("homepage").css("display","block");}
else{jQuery("#search-form").fadeIn(function(){jQuery("#search-form .query").trigger("focus");});}},closeOverlay:function(isThisHome){if(jQuery(".search-overlay input.search-input-overlay").hasClass("ui-autocomplete-input")===true){jQuery(".search-overlay input.search-input-overlay").autocomplete("close");}
searchOverlay.showClear();setTimeout(function(){jQuery("#search-form .loading-results").stop().hide().removeAttr("style");jQuery("#search-form .results-placeholder").stop().removeAttr("style").hide();jQuery("#search-form .close-search").fadeOut();jQuery("#search-form .query").removeClass("ov");if(isThisHome===true){jQuery("#search-form").addClass("close-form");jQuery("#search-overlay").fadeOut(function(){jQuery("#search-form").addClass("homepage");jQuery("#search-form").removeClass("close-form");if(jQuery("#search-form")[0].style.removeProperty){jQuery("#search-form")[0].style.removeProperty("display");}
else{jQuery("#search-form")[0].style.removeAttribute("display");}});}
else{jQuery("#search-form").fadeOut();jQuery("#search-overlay").fadeOut();}},200);},showResults:function(data){jQuery("#search-form .results-placeholder").hide();jQuery("#search-form .results-placeholder").html(data);jQuery("#search-form .loading-results").hide();if(jQuery("#search-overlay").is(":visible")===true){jQuery("#search-form .results-placeholder").fadeIn();jQuery("#search-form").addClass("results-displayed");}},showError:function(){},showClear:function(){if(jQuery("#search-form input.query").val().length>0){jQuery("#search-form .clear-query").addClass("show");}
else{jQuery("#search-form .clear-query").removeClass("show");}}};searchOverlay.init();
var kbLanding={sel:{lhsSel:"#kb-nav",subPageSel:".section-heading .lhs-heading",linkSel:".navbar-item a",listings:".landing",contentWrappper:".asset-contents",backBtn:"a.close-kb-content",noResults:"li.article-item.no-results",showAll:"a.kb-show-all",animationFlag:null},settings:{reqSuffix:"SQ_DESIGN_NAME=blank&mode=landing&show=0"},init:function(){if((jQuery(kbLanding.sel.lhsSel).length>0)&&(jQuery(kbLanding.sel.subPageSel).length===0)){kbLanding.attachLhsEvents();}},attachLhsEvents:function(){var lhsObj=jQuery(kbLanding.sel.lhsSel);if(typeof(lhsObj.attr("data-req"))!=="undefined"){kbLanding.settings.reqSuffix=lhsObj.attr("data-req");}
lhsObj.find(kbLanding.sel.linkSel).click(function(e){e.preventDefault();kbLanding.handleLhsClick(jQuery(this))});},handleLhsClick:function(linkObj){var linkId=linkObj.closest("li").attr("data-id");if(linkId===undefined){return false;}
var linkUrl=linkObj.attr("href");if(jQuery("#c-"+linkId).length>0){return kbLanding.showContent(linkId);}
return kbLanding.loadContent(linkId,linkUrl);},loadContent:function(linkId,linkUrl){jQuery.ajax({url:linkUrl,data:kbLanding.settings.reqSuffix,success:function(resp){kbLanding.loadContentCallback(resp,linkId);}});return true;},loadContentCallback:function(content,linkId){jQuery(kbLanding.sel.contentWrappper).find(kbLanding.sel.listings+":last").after(content);kbLanding.showContent(linkId);jQuery("#c-"+linkId).find(kbLanding.sel.backBtn).click(function(e){e.preventDefault();jQuery(this).closest(kbLanding.sel.listings).fadeOut(function(){jQuery(kbLanding.sel.contentWrappper).find(kbLanding.sel.listings+":first").fadeIn();});});if(jQuery("#c-"+linkId).find(kbLanding.sel.noResults).length===2){jQuery("#c-"+linkId).find(kbLanding.sel.showAll).hide();}},showContent:function(linkId){var thidCardId=linkId;if(kbLanding.sel.animationFlag!==null){kbLanding.sel.animationFlag.stop().fadeOut("fast",function(){jQuery(kbLanding.sel.listings).stop().hide();kbLanding.sel.animationFlag=jQuery("#c-"+thidCardId);kbLanding.sel.animationFlag.fadeIn(function(){jQuery(this).removeClass("loading");kbLanding.sel.animationFlag=null;});});}else{jQuery(kbLanding.sel.listings).filter(function(){kbLanding.sel.animationFlag=jQuery("#c-"+thidCardId);return jQuery(this).is(":visible");}).fadeOut(function(){kbLanding.sel.animationFlag.fadeIn(function(){jQuery(this).removeClass("loading");kbLanding.sel.animationFlag=null;});});}
return true;},showLoading:function(){jQuery(kbLanding.sel.listings).filter(function(){return jQuery(this).is(":visible");}).addClass("loading");},};kbLanding.init();
var keepLocalStorageTidy={init:function(prefix,itemToKeep){if(prefix===undefined){return false;}
var arr=[];for(var key in localStorage){if(key.substring(0,prefix.length)===prefix){if((itemToKeep!==undefined)&&(key!==itemToKeep)){arr.push(key);}}}
for(var i=0;i<arr.length;i++){localStorage.removeItem(arr[i]);}}};var fbCartMsg={"title":"My Reading List","add":{"title":"My Reading List","text":"Article has been added to your Reading List"},"del":{"title":"My Reading List","text":"Article has been removed from your Reading List"},"err":{"title":"My Reading List","text":"Cannot remove this item from your Reading List"},tokenError:{"title":"My Reading List","text":"My Reading List functionality is unavailable at the moment. Please try again later"},metaError:{"title":"My Reading List","text":"Cannot set user's Reading List ID"}};var fbSearchCart={listenersApplied:false,isThisSearch:false,metaTimeout:2000,attempts:0,metaAttempts:0,delClass:"remove",delIconClass:"fa-trash",addIconClass:"fa-bookmark",titles:{del:"Remove from Reading List",add:"Add to Reading List"},linkSel:"div.cp-tools .rl-bookmark",articleSel:"div.js-article-page",articleHeader:"div.cp-tools",searchItemHeader:"#search-container li.search-item h3",searchLinkSel:"#search-container h3 a.rl-bookmark",searchPageDS:"#search-container",urls:{setSearchCart:"",updateCart:"",removeCart:""},init:function(){if((wssUserDetails.userLoggedIn===true)&&(wssUserDetails.fbid==="true")){fbSearchCart.getCurrentList();}
if(jQuery(fbSearchCart.articleSel).length>0){fbSearchCart.startArticle();}
fbSearchCart.searchPageSetup();},getEndpoints:function(bookmarkItem){fbSearchCart.urls.setSearchCart=bookmarkItem.attr("data-fbs");fbSearchCart.urls.updateCart=bookmarkItem.attr("data-fbc");fbSearchCart.urls.removeCart=bookmarkItem.attr("data-fbd");},getCurrentList:function(){var lastLogin=localStorage.getItem("cp-ll");if((lastLogin===null)||(lastLogin===undefined)||(lastLogin!==wssUserDetails.ll)){localStorage.setItem("cp-ll",wssUserDetails.ll);keepLocalStorageTidy.init("cp-fbid--","cp-fbid--"+wssUserDetails.userId);if(typeof(cpWS.rlIds)==="undefined"){return false;}
jQuery.ajax({url:cpWS.rlIds,success:function(json){fbSearchCart.getCurrentListCallback(json);}});return true;}
return true;},getCurrentListCallback:function(json){json=isJson.init(json);if(json===false){return false;}
if(json.success===false){return false;}
if(typeof(json.items)==="undefined"){return false;}
var items="|"+json.items.join("|")+"|";localStorage.setItem("cp-rl--"+wssUserDetails.userId,items);keepLocalStorageTidy.init("cp-rl--","cp-rl--"+wssUserDetails.userId);fbSearchCart.reviewLinks();return true;},reviewLinks:function(){var storedIds=localStorage.getItem("cp-rl--"+wssUserDetails.userId);if((storedIds===null)||(storedIds===undefined)){return false;}
var h="";jQuery(fbSearchCart.linkSel+", "+fbSearchCart.searchLinkSel).each(function(){if(jQuery(this).closest("li.search-item").length>0){h=jQuery(this).closest("li.search-item").attr("data-id");}
else{h=jQuery("body").attr("data-asset-id");}
if(h!==undefined){if(storedIds.indexOf("|"+h+"|")!==-1){jQuery(this).addClass(fbSearchCart.delClass);jQuery(this).find(".fa").removeClass(fbSearchCart.addIconClass).addClass(fbSearchCart.delIconClass);}
else{jQuery(this).removeClass(fbSearchCart.delClass);jQuery(this).find(".fa").removeClass(fbSearchCart.delIconClass).addClass(fbSearchCart.addIconClass);}}});if(fbSearchCart.listenersApplied!==true){fbSearchCart.listenersApplied=true;fbSearchCart.applyChangeListeners();}},startArticle:function(){jQuery(fbSearchCart.articleHeader).append(fbSearchCart.linkHtmlTemplate);fbSearchCart.reviewLinks();fbSearchCart.getEndpoints(jQuery(fbSearchCart.articleSel));fbSearchCart.attachEvents(jQuery(fbSearchCart.linkSel));},searchPageSetup:function(){if(wssUserDetails.userLoggedIn!==true){return false;}
if(jQuery(fbSearchCart.searchPageDS).length>0){jQuery(fbSearchCart.searchItemHeader).append(fbSearchCart.linkHtmlTemplate);fbSearchCart.getEndpoints(jQuery(fbSearchCart.searchPageDS));fbSearchCart.isThisSearch=true;fbSearchCart.attachEvents(jQuery(fbSearchCart.searchLinkSel));fbSearchCart.reviewLinks();}},setNewSearchCart:function(itemLink){jQuery.ajax({url:fbSearchCart.urls.setSearchCart,error:function(){fbSearchCart.error("Error: Cannot identify user");},success:function(resp){fbSearchCart.setCookie(resp,itemLink);}});},setCookie:function(resp,itemLink){if(resp.success===false){fbSearchCart.error(resp.error);}
else{if((typeof(jQuery("#user-data").attr("data-fbmetaid"))==="undefined")||(wssUserDetails.userId===null)){fbSearchCart.error(fbCartMsg.metaError.text);}
else{var metaId=jQuery("#user-data").attr("data-fbmetaid");var tokenVal=resp.userid;js_api.setMetadata({"asset_id":wssUserDetails.userId,"field_id":metaId,"field_val":tokenVal,"dataCallback":function(jsApiResp){fbSearchCart.setCookieCallback(jsApiResp,itemLink,tokenVal)}});}}},setCookieCallback:function(resp,itemLink,tokenVal){if(typeof(resp.error)!=="undefined"){fbSearchCart.refreshToken(itemLink,tokenVal);}
else{localStorage.setItem("cp-fbid--"+wssUserDetails.userId,tokenVal);keepLocalStorageTidy.init("cp-fbid--","cp-fbid--"+wssUserDetails.userId);wssUserDetails.fbid="true";setTimeout(function(){fbSearchCart.updateCart(itemLink);},fbSearchCart.metaTimeout);}},refreshToken:function(itemLink,fbTokenVal){if(fbSearchCart.metaAttempts>3){return fbSearchCart.error(fbCartMsg.tokenError.text);}
fbSearchCart.metaAttempts++;var fbResp={"success":true,"userid":fbTokenVal};if(jQuery("#js-api").length===0){return fbSearchCart.error(fbCartMsg.tokenError.text);}
if(typeof(js_api)!=="object"){return fbSearchCart.error(fbCartMsg.tokenError.text);}
var jsApiSrc=jQuery("#js-api").attr("src");jQuery.ajax({url:jsApiSrc+"?SQ_ACTION=getToken",headers:{"X-SquizMatrix-JSAPI-Key":js_api.key},success:function(resp){if(resp.length>0){js_api.nonceToken=resp;fbSearchCart.setCookie(fbResp,itemLink);}
else{fbSearchCart.error(fbCartMsg.tokenError.text);}}});return true;},attachEvents:function(bookmarkItem){bookmarkItem.off("click.add");bookmarkItem.on("click.add",function(e){e.preventDefault();fbSearchCart.startFunctionality(jQuery(this));});},startFunctionality:function(itemLink){if(wssUserDetails.fbid==="true"){fbSearchCart.updateCart(itemLink);}
else{fbSearchCart.setNewSearchCart(itemLink);}},updateCart:function(itemLink){var thisUrl=window.location.href.split("#")[0];thisUrl=thisUrl.split("?")[0];thisUrl=thisUrl.split("/_nocache")[0];thisUrl=thisUrl.split("/_recache")[0];var hUrl=null;var thisId=null;if(fbSearchCart.isThisSearch===true){hUrl=itemLink.closest("li.search-item").find("small:eq(0)").text();if((hUrl!==undefined)&&(hUrl!=="")){thisUrl=hUrl;}
thisId=itemLink.closest("li.search-item").attr("data-id");}
else{thisId=jQuery("body").attr("data-asset-id");}
var action="add";var fbUrl=fbSearchCart.urls.updateCart;if(itemLink.hasClass(fbSearchCart.delClass)===true){action="del";fbUrl=fbSearchCart.urls.removeCart;}
jQuery.ajax({url:fbUrl,data:"url="+thisUrl,error:function(){fbSearchCart.error("Error: Cannot add this page to your reading list.");},success:function(resp){if(resp.success===true){fbSearchCart.success(thisId,itemLink,action);}
else{fbSearchCart.updateErrorCallback(resp,itemLink);}}});},updateErrorCallback:function(resp,articleUrl){if(typeof(resp.code)==="undefined"){return fbSearchCart.error(resp.error);}
if(resp.code!=="01"){return fbSearchCart.error(resp.error);}
if(fbSearchCart.attempts>3){return fbSearchCart.error(fbCartMsg.tokenError.title);}
fbSearchCart.attempts++;setTimeout(function(){fbSearchCart.updateCart(articleUrl);},500);return true;},error:function(msg){if(typeof(swal)==="function"){swal({title:fbCartMsg.title,text:msg,showConfirmButton:true,type:"error"});}
else{alert(msg);}},success:function(id,itemLink,action){fbSearchCart.attempt=0;if(action==="add"){if(typeof(swal)==="function"){swal({title:fbCartMsg.add.title,text:fbCartMsg.add.text,showConfirmButton:true,type:"success"});}
else{alert(fbCartMsg.add.text);}
fbSearchCart.addToStorage(id,itemLink);}
else{if(typeof(swal)==="function"){swal({title:fbCartMsg.del.title,text:fbCartMsg.del.text,showConfirmButton:true,type:"success"});}
else{alert(fbCartMsg.del.text);}
fbSearchCart.delFromStorage(id,itemLink);}},addToStorage:function(id,itemLink){if((typeof(id)==="undefined")||(id===null)){return false;}
if(id.length===0){return false;}
var storedIds=localStorage.getItem("cp-rl--"+wssUserDetails.userId);if((storedIds===null)||(storedIds===undefined)){storedIds="|";}
if(storedIds.indexOf("|"+id+"|")===-1){storedIds+=id+"|";localStorage.setItem("cp-rl--"+wssUserDetails.userId,storedIds);}
itemLink.attr("title",fbSearchCart.titles.del);itemLink.addClass(fbSearchCart.delClass);itemLink.find(".fa").removeClass(fbSearchCart.addIconClass).addClass(fbSearchCart.delIconClass);},delFromStorage:function(id,itemLink){if((typeof(id)==="undefined")||(id===null)){return false;}
if(id.length===0){return false;}
var storedIds=localStorage.getItem("cp-rl--"+wssUserDetails.userId);if((storedIds===null)||(storedIds===undefined)){storedIds="|";}
if(storedIds.indexOf("|"+id+"|")!==-1){storedIds=storedIds.replace("|"+id+"|","|");localStorage.setItem("cp-rl--"+wssUserDetails.userId,storedIds);}
itemLink.attr("title",fbSearchCart.titles.add);itemLink.removeClass(fbSearchCart.delClass)
itemLink.find(".fa").removeClass(fbSearchCart.delIconClass).addClass(fbSearchCart.addIconClass);},applyChangeListeners:function(){if((typeof(window.addEventListener)==="function")&&(typeof(window.removeEventListener)==="function")){window.removeEventListener('storage',fbSearchCart.listenForChanges,false);window.addEventListener('storage',fbSearchCart.listenForChanges,false);}},listenForChanges:function(e){var changedItem=e.key;if(changedItem.indexOf("cp-rl--")!==-1){fbSearchCart.reviewLinks();}}};var fbSearchCartDel={wsUrl:null,listenersApplied:false,sel:{"linkSel":"a.reading-article-delete","sectionSel":"#my-reading-articles","pageContent":".my-reading-list-page-content"},init:function(){if(jQuery(fbSearchCartDel.sel.sectionSel).length>0){fbSearchCartDel.attachEvents();fbSearchCartDel.wsUrl=jQuery(fbSearchCartDel.sel.sectionSel).attr("data-fbd");}
if(fbSearchCartDel.listenersApplied===false){fbSearchCartDel.listenersApplied=true;fbSearchCartDel.applyChangeListeners();}},attachEvents:function(){jQuery(fbSearchCartDel.sel.sectionSel).on("click.del",fbSearchCartDel.sel.linkSel,function(e){e.preventDefault();fbSearchCartDel.removeItem(jQuery(this));});},removeItem:function(linkObj){var thisUrl=linkObj.attr("data-del");if((thisUrl===undefined)||(thisUrl.length===0)){return false;}
if((fbSearchCartDel.wsUrl===null)||(fbSearchCartDel.wsUrl===undefined)){return false;}
var thisId=linkObj.attr("data-id");jQuery.ajax({url:fbSearchCartDel.wsUrl,data:"url="+thisUrl,success:function(resp){fbSearchCartDel.removeCallback(resp,thisId);},error:function(){fbSearchCartDel.err();}});return true;},removeCallback:function(resp,thisId){if(typeof(resp)==="string"){resp=JSON.parse(resp);}
if(resp.success!==true){return fbSearchCartDel.err();}
fbSearchCartDel.updatePage();if(thisId!==undefined){fbSearchCartDel.updateStorage(thisId);}},updatePage:function(){var thisUrl=window.location.href;thisUrl=thisUrl.split("#")[0];thisUrl=thisUrl.split("?")[0];thisUrl+="?SQ_DESIGN_NAME=blank&SQ_PAINT_LAYOUT_NAME=blank";jQuery.ajax({url:thisUrl,success:function(newHtml){jQuery(fbSearchCartDel.sel.sectionSel).find(fbSearchCartDel.sel.pageContent).fadeOut(function(){jQuery(this).html(newHtml);jQuery(this).fadeIn();});},error:function(){window.location.reload();}});},updateStorage:function(id){if((typeof(id)==="undefined")||(id===null)){return false;}
if(id.length===0){return false;}
if(wssUserDetails.userId===null){return false;}
var storedIds=localStorage.getItem("cp-rl--"+wssUserDetails.userId);if((storedIds===null)||(storedIds===undefined)){storedIds="";}
if(storedIds.indexOf("|"+id+"|")!==-1){storedIds=storedIds.replace("|"+id+"|","|");localStorage.setItem("cp-rl--"+wssUserDetails.userId,storedIds);}
return true;},err:function(){if(typeof(swal)==="function"){swal({title:fbCartMsg.err.title,text:fbCartMsg.err.text,showConfirmButton:true,type:"error"});}
else{alert(fbCartMsg.err.text);}},applyChangeListeners:function(){if((typeof(window.addEventListener)==="function")&&(typeof(window.removeEventListener)==="function")){window.removeEventListener('storage',fbSearchCartDel.listenForChanges,false);window.addEventListener('storage',fbSearchCartDel.listenForChanges,false);}},listenForChanges:function(e){var changedItem=e.key;if(changedItem.indexOf("cp-rl--")!==-1){fbSearchCartDel.updatePage();}}};fbSearchCart.linkHtmlTemplate=""+"\n <a href='#' title='Add to Reading List' class='rl-bookmark'>"+"\n  <i class='fa fa-bookmark'></i>"+"\n </a>";fbSearchCartDel.init();!function(e){if(!e.hasInitialised){var t={escapeRegExp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},hasClass:function(e,t){var i=" ";return 1===e.nodeType&&(i+e.className+i).replace(/[\n\t]/g,i).indexOf(i+t+i)>=0},addClass:function(e,t){e.className+=" "+t},removeClass:function(e,t){var i=new RegExp("\\b"+this.escapeRegExp(t)+"\\b");e.className=e.className.replace(i,"")},interpolateString:function(e,t){var i=/{{([a-z][a-z0-9\-_]*)}}/gi;return e.replace(i,function(e){return t(arguments[1])||""})},getCookie:function(e){var t="; "+document.cookie,i=t.split("; "+e+"=");return 2!=i.length?void 0:i.pop().split(";").shift()},setCookie:function(e,t,i,n,o){var s=new Date;s.setDate(s.getDate()+(i||365));var r=[e+"="+t,"expires="+s.toUTCString(),"path="+(o||"/")];n&&r.push("domain="+n),document.cookie=r.join(";")},deepExtend:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(i in e&&this.isPlainObject(e[i])&&this.isPlainObject(t[i])?this.deepExtend(e[i],t[i]):e[i]=t[i]);return e},throttle:function(e,t){var i=!1;return function(){i||(e.apply(this,arguments),i=!0,setTimeout(function(){i=!1},t))}},hash:function(e){var t,i,n,o=0;if(0===e.length)return o;for(t=0,n=e.length;t<n;++t)i=e.charCodeAt(t),o=(o<<5)-o+i,o|=0;return o},normaliseHex:function(e){return"#"==e[0]&&(e=e.substr(1)),3==e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e},getContrast:function(e){e=this.normaliseHex(e);var t=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16),o=(299*t+587*i+114*n)/1e3;return o>=128?"#000":"#fff"},getLuminance:function(e){var t=parseInt(this.normaliseHex(e),16),i=38,n=(t>>16)+i,o=(t>>8&255)+i,s=(255&t)+i,r=(16777216+65536*(n<255?n<1?0:n:255)+256*(o<255?o<1?0:o:255)+(s<255?s<1?0:s:255)).toString(16).slice(1);return"#"+r},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},isPlainObject:function(e){return"object"==typeof e&&null!==e&&e.constructor==Object}};e.status={deny:"deny",allow:"allow",dismiss:"dismiss"},e.transitionEnd=function(){var e=document.createElement("div"),t={t:"transitionend",OT:"oTransitionEnd",msT:"MSTransitionEnd",MozT:"transitionend",WebkitT:"webkitTransitionEnd"};for(var i in t)
if(t.hasOwnProperty(i)&&"undefined"!=typeof e.style[i+"ransition"])return t[i];return""}(),e.hasTransition=!!e.transitionEnd;var i=Object.keys(e.status).map(t.escapeRegExp);e.customStyles={},e.Popup=function(){function n(){this.initialise.apply(this,arguments)}
function o(e){this.openingTimeout=null,t.removeClass(e,"cc-invisible")}
function s(t){t.style.display="none",t.removeEventListener(e.transitionEnd,this.afterTransition),this.afterTransition=null}
function r(){var t=this.options.onInitialise.bind(this);if(!window.navigator.cookieEnabled)return t(e.status.deny),!0;if(window.CookiesOK||window.navigator.CookiesOK)return t(e.status.allow),!0;var i=Object.keys(e.status),n=this.getStatus(),o=i.indexOf(n)>=0;return o&&t(n),o}
function a(){var e=this.options.position.split("-"),t=[];return e.forEach(function(e){t.push("cc-"+e)}),t}
function c(){var e=this.options,i="top"==e.position||"bottom"==e.position?"banner":"floating";t.isMobile()&&(i="floating");var n=["cc-"+i,"cc-type-"+e.type,"cc-theme-"+e.theme];e["static"]&&n.push("cc-static"),n.push.apply(n,a.call(this));p.call(this,this.options.palette);return this.customStyleSelector&&n.push(this.customStyleSelector),n}
function l(){var e={},i=this.options;i.showLink||(i.elements.link="",i.elements.messagelink=i.elements.message),Object.keys(i.elements).forEach(function(n){e[n]=t.interpolateString(i.elements[n],function(e){var t=i.content[e];return e&&"string"==typeof t&&t.length?t:""})});var n=i.compliance[i.type];n||(n=i.compliance.info),e.compliance=t.interpolateString(n,function(t){return e[t]});var o=i.layouts[i.layout];return o||(o=i.layouts.basic),t.interpolateString(o,function(t){return e[t]})}
function u(i){var n=this.options,o=document.createElement("div"),s=n.container&&1===n.container.nodeType?n.container:document.body;o.innerHTML=i;var r=o.children[0];return r.style.display="none",t.hasClass(r,"cc-window")&&e.hasTransition&&t.addClass(r,"cc-invisible"),this.onButtonClick=h.bind(this),r.addEventListener("click",this.onButtonClick),n.autoAttach&&(s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r)),r}
function h(n){var o=n.target;if(t.hasClass(o,"cc-btn")){var s=o.className.match(new RegExp("\\bcc-("+i.join("|")+")\\b")),r=s&&s[1]||!1;r&&(this.setStatus(r),this.close(!0))}
t.hasClass(o,"cc-close")&&(this.setStatus(e.status.dismiss),this.close(!0)),t.hasClass(o,"cc-revoke")&&this.revokeChoice()}
function p(e){var i=t.hash(JSON.stringify(e)),n="cc-color-override-"+i,o=t.isPlainObject(e);return this.customStyleSelector=o?n:null,o&&d(i,e,"."+n),o}
function d(i,n,o){if(e.customStyles[i])return void++e.customStyles[i].references;var s={},r=n.popup,a=n.button,c=n.highlight;r&&(r.text=r.text?r.text:t.getContrast(r.background),r.link=r.link?r.link:r.text,s[o+".cc-window"]=["color: "+r.text,"background-color: "+r.background],s[o+".cc-revoke"]=["color: "+r.text,"background-color: "+r.background],s[o+" .cc-link,"+o+" .cc-link:active,"+o+" .cc-link:visited"]=["color: "+r.link],a&&(a.text=a.text?a.text:t.getContrast(a.background),a.border=a.border?a.border:"transparent",s[o+" .cc-btn"]=["color: "+a.text,"border-color: "+a.border,"background-color: "+a.background],"transparent"!=a.background&&(s[o+" .cc-btn:hover, "+o+" .cc-btn:focus"]=["background-color: "+v(a.background)]),c?(c.text=c.text?c.text:t.getContrast(c.background),c.border=c.border?c.border:"transparent",s[o+" .cc-highlight .cc-btn:first-child"]=["color: "+c.text,"border-color: "+c.border,"background-color: "+c.background]):s[o+" .cc-highlight .cc-btn:first-child"]=["color: "+r.text]));var l=document.createElement("style");document.head.appendChild(l),e.customStyles[i]={references:1,element:l.sheet};var u=-1;for(var h in s)s.hasOwnProperty(h)&&l.sheet.insertRule(h+"{"+s[h].join(";")+"}",++u)}
function v(e){return e=t.normaliseHex(e),"000000"==e?"#222":t.getLuminance(e)}
function f(i){if(t.isPlainObject(i)){var n=t.hash(JSON.stringify(i)),o=e.customStyles[n];if(o&&!--o.references){var s=o.element.ownerNode;s&&s.parentNode&&s.parentNode.removeChild(s),e.customStyles[n]=null}}}
function m(e,t){for(var i=0,n=e.length;i<n;++i){var o=e[i];if(o instanceof RegExp&&o.test(t)||"string"==typeof o&&o.length&&o===t)return!0}
return!1}
function b(){var t=this.setStatus.bind(this),i=this.options.dismissOnTimeout;"number"==typeof i&&i>=0&&(this.dismissTimeout=window.setTimeout(function(){t(e.status.dismiss)},Math.floor(i)));var n=this.options.dismissOnScroll;if("number"==typeof n&&n>=0){var o=function(i){window.pageYOffset>Math.floor(n)&&(t(e.status.dismiss),window.removeEventListener("scroll",o),this.onWindowScroll=null)};this.onWindowScroll=o,window.addEventListener("scroll",o)}}
function y(){if("info"!=this.options.type&&(this.options.revokable=!0),t.isMobile()&&(this.options.animateRevokable=!1),this.options.revokable){var e=a.call(this);this.options.animateRevokable&&e.push("cc-animate"),this.customStyleSelector&&e.push(this.customStyleSelector);var i=this.options.revokeBtn.replace("{{classes}}",e.join(" "));this.revokeBtn=u.call(this,i);var n=this.revokeBtn;if(this.options.animateRevokable){var o=t.throttle(function(e){var i=!1,o=20,s=window.innerHeight-20;t.hasClass(n,"cc-top")&&e.clientY<o&&(i=!0),t.hasClass(n,"cc-bottom")&&e.clientY>s&&(i=!0),i?t.hasClass(n,"cc-active")||t.addClass(n,"cc-active"):t.hasClass(n,"cc-active")&&t.removeClass(n,"cc-active")},200);this.onMouseMove=o,window.addEventListener("mousemove",o)}}}
var g={enabled:!0,container:null,cookie:{name:"cookieconsent_status",path:"/",domain:"",expiryDays:365},onPopupOpen:function(){},onPopupClose:function(){},onInitialise:function(e){},onStatusChange:function(e,t){},onRevokeChoice:function(){},content:{header:"Cookies used on the website!",message:"This website uses cookies to ensure you get the best experience on our website.",dismiss:"Understand!",allow:"Allow cookies",deny:"Decline",close:"&#x274c;"},elements:{header:'<span class="cc-header">{{header}}</span>&nbsp;',message:'<span id="cookieconsent:desc" class="cc-message">{{message}}</span>',messagelink:'<span id="cookieconsent:desc" class="cc-message">{{message}} <a aria-label="learn more about cookies" role=button tabindex="0" class="cc-link" href="{{href}}" target="_blank">{{link}}</a></span>',dismiss:'<a aria-label="dismiss cookie message" role=button tabindex="0" class="cc-btn cc-dismiss">{{dismiss}}</a>',allow:'<a aria-label="allow cookies" role=button tabindex="0"  class="cc-btn cc-allow">{{allow}}</a>',deny:'<a aria-label="deny cookies" role=button tabindex="0" class="cc-btn cc-deny">{{deny}}</a>',link:'<a aria-label="learn more about cookies" role=button tabindex="0" class="cc-link" href="{{href}}" target="_blank">{{link}}</a>',close:'<span aria-label="dismiss cookie message" role=button tabindex="0" class="cc-close">{{close}}</span>'},window:'<div role="dialog" aria-live="polite" aria-label="cookieconsent" aria-describedby="cookieconsent:desc" class="cc-window {{classes}}"><!--googleoff: all-->{{children}}<!--googleon: all--></div>',revokeBtn:'<div class="cc-revoke {{classes}}">Cookie Policy</div>',compliance:{info:'<div class="cc-compliance">{{dismiss}}</div>',"opt-in":'<div class="cc-compliance cc-highlight">{{dismiss}}{{allow}}</div>',"opt-out":'<div class="cc-compliance cc-highlight">{{deny}}{{dismiss}}</div>'},type:"info",layouts:{basic:"{{messagelink}}{{compliance}}","basic-close":"{{messagelink}}{{compliance}}{{close}}","basic-header":"{{header}}{{message}}{{link}}{{compliance}}"},layout:"basic",position:"bottom",theme:"block","static":!1,palette:null,revokable:!1,animateRevokable:!0,showLink:!0,dismissOnScroll:!1,dismissOnTimeout:!1,autoOpen:!0,autoAttach:!0,whitelistPage:[],blacklistPage:[],overrideHTML:null};return n.prototype.initialise=function(e){this.options&&this.destroy(),t.deepExtend(this.options={},g),t.isPlainObject(e)&&t.deepExtend(this.options,e),r.call(this)&&(this.options.enabled=!1),m(this.options.blacklistPage,location.pathname)&&(this.options.enabled=!1),m(this.options.whitelistPage,location.pathname)&&(this.options.enabled=!0);var i=this.options.window.replace("{{classes}}",c.call(this).join(" ")).replace("{{children}}",l.call(this)),n=this.options.overrideHTML;if("string"==typeof n&&n.length&&(i=n),this.options["static"]){var o=u.call(this,'<div class="cc-grower">'+i+"</div>");o.style.display="",this.element=o.firstChild,this.element.style.display="none",t.addClass(this.element,"cc-invisible")}else this.element=u.call(this,i);b.call(this),y.call(this),this.options.autoOpen&&this.autoOpen()},n.prototype.destroy=function(){this.onButtonClick&&this.element&&(this.element.removeEventListener("click",this.onButtonClick),this.onButtonClick=null),this.dismissTimeout&&(clearTimeout(this.dismissTimeout),this.dismissTimeout=null),this.onWindowScroll&&(window.removeEventListener("scroll",this.onWindowScroll),this.onWindowScroll=null),this.onMouseMove&&(window.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=null),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.revokeBtn&&this.revokeBtn.parentNode&&this.revokeBtn.parentNode.removeChild(this.revokeBtn),this.revokeBtn=null,f(this.options.palette),this.options=null},n.prototype.open=function(t){if(this.element)return this.isOpen()||(e.hasTransition?this.fadeIn():this.element.style.display="",this.options.revokable&&this.toggleRevokeButton(),this.options.onPopupOpen.call(this)),this},n.prototype.close=function(t){if(this.element)return this.isOpen()&&(e.hasTransition?this.fadeOut():this.element.style.display="none",t&&this.options.revokable&&this.toggleRevokeButton(!0),this.options.onPopupClose.call(this)),this},n.prototype.fadeIn=function(){var i=this.element;if(e.hasTransition&&i&&(this.afterTransition&&s.call(this,i),t.hasClass(i,"cc-invisible"))){if(i.style.display="",this.options["static"]){var n=this.element.clientHeight;this.element.parentNode.style.maxHeight=n+"px"}
var r=20;this.openingTimeout=setTimeout(o.bind(this,i),r)}},n.prototype.fadeOut=function(){var i=this.element;jQuery(i).slideUp();},n.prototype.isOpen=function(){return this.element&&""==this.element.style.display&&(!e.hasTransition||!t.hasClass(this.element,"cc-invisible"))},n.prototype.toggleRevokeButton=function(e){this.revokeBtn&&(this.revokeBtn.style.display=e?"":"none")},n.prototype.revokeChoice=function(e){this.options.enabled=!0,this.clearStatus(),this.options.onRevokeChoice.call(this),e||this.autoOpen()},n.prototype.hasAnswered=function(t){return Object.keys(e.status).indexOf(this.getStatus())>=0},n.prototype.hasConsented=function(t){var i=this.getStatus();return i==e.status.allow||i==e.status.dismiss},n.prototype.autoOpen=function(e){!this.hasAnswered()&&this.options.enabled&&this.open()},n.prototype.setStatus=function(i){var n=this.options.cookie,o=t.getCookie(n.name),s=Object.keys(e.status).indexOf(o)>=0;Object.keys(e.status).indexOf(i)>=0?(t.setCookie(n.name,i,n.expiryDays,n.domain,n.path),this.options.onStatusChange.call(this,i,s)):this.clearStatus()},n.prototype.getStatus=function(){return t.getCookie(this.options.cookie.name)},n.prototype.clearStatus=function(){var e=this.options.cookie;t.setCookie(e.name,"",-1,e.domain,e.path)},n}(),e.Location=function(){function e(e){t.deepExtend(this.options={},s),t.isPlainObject(e)&&t.deepExtend(this.options,e),this.currentServiceIndex=-1}
function i(e,t,i){var n,o=document.createElement("script");o.type="text/"+(e.type||"javascript"),o.src=e.src||e,o.async=!1,o.onreadystatechange=o.onload=function(){var e=o.readyState;clearTimeout(n),t.done||e&&!/loaded|complete/.test(e)||(t.done=!0,t(),o.onreadystatechange=o.onload=null)},document.body.appendChild(o),n=setTimeout(function(){t.done=!0,t(),o.onreadystatechange=o.onload=null},i)}
function n(e,t,i,n,o){var s=new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0");if(s.open(n?"POST":"GET",e,1),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Array.isArray(o))
for(var r=0,a=o.length;r<a;++r){var c=o[r].split(":",2);s.setRequestHeader(c[0].replace(/^\s+|\s+$/g,""),c[1].replace(/^\s+|\s+$/g,""))}"function"==typeof t&&(s.onreadystatechange=function(){s.readyState>3&&t(s)}),s.send(n)}
function o(e){return new Error("Error ["+(e.code||"UNKNOWN")+"]: "+e.error)}
var s={timeout:5e3,services:["freegeoip","ipinfo","maxmind"],serviceDefinitions:{freegeoip:function(){return{url:"//freegeoip.net/json/?callback={callback}",isScript:!0,callback:function(e,t){try{var i=JSON.parse(t);return i.error?o(i):{code:i.country_code}}catch(n){return o({error:"Invalid response ("+n+")"})}}}},ipinfo:function(){return{url:"//ipinfo.io",headers:["Accept: application/json"],callback:function(e,t){try{var i=JSON.parse(t);return i.error?o(i):{code:i.country}}catch(n){return o({error:"Invalid response ("+n+")"})}}}},ipinfodb:function(e){return{url:"//api.ipinfodb.com/v3/ip-country/?key={api_key}&format=json&callback={callback}",isScript:!0,callback:function(e,t){try{var i=JSON.parse(t);return"ERROR"==i.statusCode?o({error:i.statusMessage}):{code:i.countryCode}}catch(n){return o({error:"Invalid response ("+n+")"})}}}},maxmind:function(){return{url:"//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js",isScript:!0,callback:function(e){return window.geoip2?void geoip2.country(function(t){try{e({code:t.country.iso_code})}catch(i){e(o(i))}},function(t){e(o(t))}):void e(new Error("Unexpected response format. The downloaded script should have exported `geoip2` to the global scope"))}}}}};return e.prototype.getNextService=function(){var e;do e=this.getServiceByIdx(++this.currentServiceIndex);while(this.currentServiceIndex<this.options.services.length&&!e);return e},e.prototype.getServiceByIdx=function(e){var i=this.options.services[e];if("function"==typeof i){var n=i();return n.name&&t.deepExtend(n,this.options.serviceDefinitions[n.name](n)),n}
return"string"==typeof i?this.options.serviceDefinitions[i]():t.isPlainObject(i)?this.options.serviceDefinitions[i.name](i):null},e.prototype.locate=function(e,t){var i=this.getNextService();return i?(this.callbackComplete=e,this.callbackError=t,void this.runService(i,this.runNextServiceOnError.bind(this))):void t(new Error("No services to run"))},e.prototype.setupUrl=function(e){var t=this.getCurrentServiceOpts();return e.url.replace(/\{(.*?)\}/g,function(i,n){if("callback"===n){var o="callback"+Date.now();return window[o]=function(t){e.__JSONP_DATA=JSON.stringify(t)},o}
if(n in t.interpolateUrl)return t.interpolateUrl[n]})},e.prototype.runService=function(e,t){var o=this;if(e&&e.url&&e.callback){var s=e.isScript?i:n,r=this.setupUrl(e);s(r,function(i){var n=i?i.responseText:"";e.__JSONP_DATA&&(n=e.__JSONP_DATA,delete e.__JSONP_DATA),o.runServiceCallback.call(o,t,e,n)},this.options.timeout,e.data,e.headers)}},e.prototype.runServiceCallback=function(e,t,i){var n=this,o=function(t){s||n.onServiceResult.call(n,e,t)},s=t.callback(o,i);s&&this.onServiceResult.call(this,e,s)},e.prototype.onServiceResult=function(e,t){t instanceof Error||t&&t.error?e.call(this,t,null):e.call(this,null,t)},e.prototype.runNextServiceOnError=function(e,t){if(e){this.logError(e);var i=this.getNextService();i?this.runService(i,this.runNextServiceOnError.bind(this)):this.completeService.call(this,this.callbackError,new Error("All services failed"))}else this.completeService.call(this,this.callbackComplete,t)},e.prototype.getCurrentServiceOpts=function(){var e=this.options.services[this.currentServiceIndex];return"string"==typeof e?{name:e}:"function"==typeof e?e():t.isPlainObject(e)?e:{}},e.prototype.completeService=function(e,t){this.currentServiceIndex=-1,e&&e(t)},e.prototype.logError=function(e){var t=this.currentServiceIndex,i=this.getServiceByIdx(t);console.error("The service["+t+"] ("+i.url+") responded with the following error",e)},e}(),e.Law=function(){function e(e){this.initialise.apply(this,arguments)}
var i={regionalLaw:!0,hasLaw:["AT","BE","BG","HR","CZ","CY","DK","EE","FI","FR","DE","EL","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","SK","SI","ES","SE","GB","UK"],revokable:["HR","CY","DK","EE","FR","DE","LV","LT","NL","PT","ES"],explicitAction:["HR","IT","ES"]};return e.prototype.initialise=function(e){t.deepExtend(this.options={},i),t.isPlainObject(e)&&t.deepExtend(this.options,e)},e.prototype.get=function(e){var t=this.options;return{hasLaw:t.hasLaw.indexOf(e)>=0,revokable:t.revokable.indexOf(e)>=0,explicitAction:t.explicitAction.indexOf(e)>=0}},e.prototype.applyLaw=function(e,t){var i=this.get(t);return i.hasLaw||(e.enabled=!1),this.options.regionalLaw&&(i.revokable&&(e.revokable=!0),i.explicitAction&&(e.dismissOnScroll=!1,e.dismissOnTimeout=!1)),e},e}(),e.initialise=function(t,i,n){var o=new e.Law(t.law);i||(i=function(){}),n||(n=function(){}),e.getCountryCode(t,function(n){delete t.law,delete t.location,n.code&&(t=o.applyLaw(t,n.code)),i(new e.Popup(t))},function(i){delete t.law,delete t.location,n(i,new e.Popup(t))})},e.getCountryCode=function(t,i,n){if(t.law&&t.law.countryCode)return void i({code:t.law.countryCode});if(t.location){var o=new e.Location(t.location);return void o.locate(function(e){i(e||{})},n)}
i({})},e.utils=t,e.hasInitialised=!0,window.cookieconsent=e}}(window.cookieconsent||{});var cookieMsg={msgBoxHeight:0,resizedFinished:null,resizeWaitTime:200,resizeTriggered:false,msgBoxSel:"body > .cc-grower",items:["a.searchbox-trigger","a.comment-trigger"],init:function(){if(typeof(cMsg)!=="object"){return false;}
var cExpiry=365;if(typeof(cMsg.exp)!==undefined){cExpiry=cMsg.exp;}
var cContent={};if((typeof(cMsg.btn)==="string")&&(cMsg.btn.length>0)){cContent.dismiss=cMsg.btn;}
if((typeof(cMsg.msg)==="string")&&(cMsg.msg.length>0)){cContent.message=cMsg.msg;}
window.cookieconsent.initialise({"palette":{"popup":{"background":"#151515"},"button":{"background":"#14a7d0"}},"position":"top","cookie":{"expiryDays":cExpiry},"content":cContent,"position":"top","static":true,onPopupOpen:function(){cookieMsg.msgBoxHeight=this.element.clientHeight;if(jQuery(cookieMsg.msgBoxSel)[0].style.removeProperty){jQuery(cookieMsg.msgBoxSel)[0].style.removeProperty("max-height");}
else{jQuery(cookieMsg.msgBoxSel)[0].style.removeAttribute("max-height");}
if($('body.home').length==0){cookieMsg.onCookieMsgLoad();}
jQuery("body").addClass("cookie-msg-visible");if($('body.home').length==0){cookieMsg.onWindowResize();}},onPopupClose:function(){cookieMsg.onCookieMsgClose();window.removeEventListener("resize",cookieMsg.resizeCallback);jQuery("body").removeClass("cookie-msg-visible");}});},onCookieMsgLoad:function(clearTop){if(cookieMsg.msgBoxHeight===0){return false;}
var h=0;var thisItem=null;for(var i in cookieMsg.items){cookieMsg.fixItemOnOpen(cookieMsg.items[i],clearTop);}
return true;},fixItemOnOpen:function(thisItemSel,clearTop){if(typeof(thisItemSel)!=="string"){return false;}
var thisItem=jQuery(thisItemSel);if(thisItem.length===0){return false;}
if(thisItem.is(":visible")===false){return false;}
if(clearTop===true){if(thisItem[0].style.removeProperty){thisItem[0].style.removeProperty("top");}
else{thisItem[0].style.removeAttribute("top");}}
var thisTop=thisItem.css("top").replace("px","");thisTop=parseFloat(thisTop);thisTop=thisTop+cookieMsg.msgBoxHeight;thisItem.css("top",thisTop+"px");return true;},onCookieMsgClose:function(){if(cookieMsg.msgBoxHeight===0){return false;}
var thisItem=null;var h=0;for(var j in cookieMsg.items){cookieMsg.fixItemOnClose(cookieMsg.items[j]);}
return true;},fixItemOnClose:function(thisItemSel){if(typeof(thisItemSel)!=="string"){return false;}
var thisItem=jQuery(thisItemSel);if(thisItem.length===0){return false;}
if(thisItem.is(":visible")===false){return false;}
var thisTop=thisItem.css("top").replace("px","");thisTop=parseFloat(thisTop);thisTop=thisTop-cookieMsg.msgBoxHeight;thisItem.animate({top:thisTop+"px"},function(){if(thisItem[0].style.removeProperty){thisItem[0].style.removeProperty("top");}
else{thisItem[0].style.removeAttribute("top");}});return true;},onWindowResize:function(){if(cookieMsg.resizeTriggered!==false){return false;}
cookieMsg.resizeTriggered=true;window.addEventListener("resize",cookieMsg.resizeCallback,false);},resizeCallback:function(){clearTimeout(cookieMsg.resizedFinished);cookieMsg.resizedFinished=setTimeout(function(){cookieMsg.msgBoxHeight=jQuery(cookieMsg.msgBoxSel).height();cookieMsg.onCookieMsgLoad(true);},cookieMsg.resizeWaitTime);}};window.addEventListener("load",function(){cookieMsg.init();});
var termsandConditions={ajaxURL:null,init:function(){if(termsandConditions.validateTerms()===false){return false;}
termsandConditions.ajaxURL=termsPopup.ajaxurl;termsandConditions.popupInitialize();return true;},validateTerms:function(){if(wssUserDetails.userLoggedIn===false){return false;}
if(typeof(termsPopup)!=="object"){return false;}
if(termsPopup.accountUser!=="true"){return false;}
if(termsPopup.value!=="false"){return false;}
if(window.location.href===termsPopup.buttonNotAgreeLink){return false;}
if(window.location.href.indexOf("/_admin")!==-1){return false;}
if(window.location.href.indexOf("/_edit")!==-1){return false;}
return true;},attachEvents:function(){$('#terms-popup .buttons-terms #btn-agree').click(function(e){e.preventDefault();termsandConditions.changeMeta('true');});$('#terms-popup .close').click(function(e){e.preventDefault();$('#terms-overlay').css('display','none');$('#search-form').css('z-index',"999");});},changeMeta:function(value){jQuery.ajax({url:termsandConditions.ajaxURL,type:"POST",data:{"value":value},success:function(res){termsandConditions.disableOverlay();termsandConditions.thankYouPopup();}});},disableOverlay:function(){$('#terms-overlay').css('display','none');$('#search-form').css('z-index',"999");},popupInitialize:function(){var overlay=[];overlay.push('<div id="terms-overlay"></div>');$('body').prepend(overlay);$('#search-form').css('z-index',"1");var content=[];content.push('<div id="terms-popup"><a class="close" href="#">×</a><h3>'+termsPopup.header+'</h3><div class="term-content">'+termsPopup.content+'</div><div class="buttons-terms text-right"><a id="btn-not-agree" class="btn btn-primary btn-form-submit" href='+termsPopup.buttonNotAgreeLink+'>'+termsPopup.buttonNotAgreeText+'</a><a id="btn-agree" class="btn btn-primary btn-form-submit" href="#">'+termsPopup.buttonAgreeText+'</a></div></div>');$('#terms-overlay').append(content);termsandConditions.attachEvents();},thankYouPopup:function(){if(typeof(swal)!=="function"){return false;}
swal({title:termsPopup.thtitle,text:termsPopup.thcontent,timer:3000,showConfirmButton:false,type:"success"});return true;},};var socialmediaValidation={validator:null,debug:false,sel:{google:".asset-contents .google-registration",facebook:".asset-contents .facebook-registration",signInSubmit:"#SQ_LOGIN_SUBMIT[name='SQ_LOGIN_SUBMIT']",registerSubmit:"#sq_commit_button[name='sq_commit_button']"},init:function(){if(document.location.href.indexOf("/_admin")!==-1){return false;}
if(document.location.href.indexOf("/_edit")!==-1){return false;}
if(jQuery(socialmediaValidation.sel.google).length===0){var visibleGoogle=0;}
if(jQuery(socialmediaValidation.sel.facebook).length===0&&visibleGoogle===0){return false;}
if(typeof(jQuery().validate)!=="function"){return false;}
var ccode=socialmediaValidation.getCountryCode();socialmediaValidation.prepareForm();return socialmediaValidation.start(ccode);},prepareForm:function(){jQuery(socialmediaValidation.sel.google).closest("form").removeAttr("onsubmit");jQuery(socialmediaValidation.sel.facebook).closest("form").removeAttr("onsubmit");},getCountryCode:function(){return"EN";},log:function(msg){if(socialmediaValidation.debug!==true){return false;}},start:function(ccode){if(jQuery(socialmediaValidation.sel.google).is(":visible")){var socialMediaForm=jQuery(socialmediaValidation.sel.google).closest("form");}else{var socialMediaForm=jQuery(socialmediaValidation.sel.facebook).closest("form");}
if(socialMediaForm.length===0){return false;}
var socialoptions={submitHandler:function(form){form.submit();},errorPlacement:function(error,element){var elType=jQuery(element).attr("type");if(elType==="checkbox"){var h=jQuery(element).closest("div.row").find("span.required");if(h.length>0){error.insertAfter(h);}else{error.insertAfter(element)}}else{error.insertAfter(element);}}};socialmediaValidation.validator=socialMediaForm.validate(socialoptions)
if(jQuery(socialmediaValidation.sel.google).is(":visible")===true||jQuery(socialmediaValidation.sel.facebook).is(":visible")===true){socialMediaSignInValidation.init(ccode);}else{return false;}
jQuery(socialmediaValidation.sel.registerSubmit).removeAttr("onclick").off("click.formSubmit");jQuery(socialmediaValidation.sel.registerSubmit).on("click.formSubmit",function(e){e.preventDefault();var isFormValid=socialMediaForm.valid();if(isFormValid===false){return false;}
jQuery("input[id$='_ASSET_BUILDER_ACTION']").val("create");jQuery("input#SQ_ACTION").val("");socialMediaForm.submit();});return true;},};var socialMediaSignInValidation={init:function(ccode){if(typeof(ccode)==="undefined"){ccode="EN";}
socialmediaValidation.log("Applying Registration rules...");var messages=vSignInCfgsocial[ccode];jQuery("#t_and_c").rules("add",{"required":true,"messages":{"required":messages["t_and_c"].required}});}};var vSignInCfgsocial={"EN":{"t_and_c":{"required":"Please accept Terms and Conditions"}}};var socialMediaLogin={init:function(){socialMediaLogin.facebook();socialMediaLogin.validation();socialMediaLogin.google();},facebook:function(){var randompassword=Math.random().toString(36).slice(-8);$('.facebook-registration').find("input[type='password']").val(randompassword);},validation:function(){if($('.google-registration').length==1){if($('.google-registration').find('div[data-name="firstName"] .sso-text').text()==0){var html=[];html.push('<p class="error-message">Sorry, there was some problems with your Google+ account. Make sure that you have your Google+ account enabled and you provided your First and Last Name.</p>');$('.asset-contents-section').find('.asset-contents').prepend(html);}}},google:function(){var randompassword=Math.random().toString(36).slice(-8);$('.google-registration').find("input[type='password']").val(randompassword);}};socialmediaValidation.init();socialMediaLogin.init();